<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
				xmlns:of="http://omnifaces.org/functions">
	
	
	<div class="p-col-12 p-md-4">
					
		<div class="card card-w-title">
			
			<h2 class="cardTitle"><i class="fa fa-check-circle"></i>  Nota de #{msg['label.credito2']}</h2>
			
			<!-- Formulario -->
			<p:panelGrid id="gridNotaCreditoDG" columns="1" styleClass="ui-panelgrid-blank Wid100" columnClasses="ui-g-12">
				
				<h:outputText value="SECUENCIAL DOCUMENTO" styleClass="cpoRequerido"/>
				<h:panelGroup>
					<p:outputPanel id="oupSecuenalNc">
						<f:subview rendered="#{notaCreditoCtrl.notaCreditoSeleccion.idcabecera!=null}">
							<div class="EmptyBox5"></div>
							<h:outputText value="#{notaCreditoCtrl.getFormatoNumDocumento(notaCreditoCtrl.notaCreditoSeleccion.numdocumento)}" styleClass="Fs18 FontBold"/>
							<div class="EmptyBox5"></div>
						</f:subview>
						<f:subview rendered="#{notaCreditoCtrl.notaCreditoSeleccion.idcabecera==null}">
							<h:outputText value="#{notaCreditoCtrl.notaCreditoSeleccion.secuencialEstablecimiento}" />
							<h:outputText value=" - " />
							<p:inputMask id="intSecCaja" value="#{notaCreditoCtrl.notaCreditoSeleccion.secuencialCaja}" maxlength="3" mask="999" style="width:50px;font-size:14px !important;"  required="true" requiredMessage="REQUERIDO"/>
							<h:outputText value=" - " />
							<h:outputText value="#{notaCreditoCtrl.notaCreditoSeleccion.secuencialNumero}" rendered="#{not notaCreditoCtrl.notaCreditoSeleccion.editarSecuencial}"/>
							<p:inputMask id="intSecDocumento" value="#{notaCreditoCtrl.notaCreditoSeleccion.secuencialNumero}" maxlength="7" mask="999999999" rendered="#{notaCreditoCtrl.notaCreditoSeleccion.editarSecuencial}" style="width:100px;font-size:14px !important;" required="true" requiredMessage="REQUERIDO"/>
							<p:spacer width="5px;"/>
							<p:commandLink action="#{notaCreditoCtrl.editarSecuencialAction()}" process=":formMain:oupSecuenalNc" update=":formMain:msgFormMain :formMain:oupSecuenalNc">
								<i class="fa fa-edit Fs18"/>
							</p:commandLink>
							<p:spacer width="5px;"/>
							<p:commandLink action="#{notaCreditoCtrl.noEditarSecuencialAction()}" process="@this" update=":formMain:msgFormMain :formMain:oupSecuenalNc">
								<i class="fa fa-trash-o Fs18 " style="color:red;"/>
							</p:commandLink>
							<p:message styleClass="Wid100" for="intSecCaja"/>
							<p:message styleClass="Wid100" for="intSecDocumento" rendered="#{notaCreditoCtrl.notaCreditoSeleccion.editarSecuencial}"/>
						</f:subview>
					</p:outputPanel>					
				
					
				</h:panelGroup>
				
				<h:outputText value="FECHA #{msg['label.emision']} *" styleClass="cpoRequerido"/>
				<h:panelGroup>
					<p:calendar id="claNcFechaEmision" value="#{notaCreditoCtrl.notaCreditoSeleccion.fechaemision}"
						pattern="dd/MM/yyyy"
						locale="es" 
						requiredMessage="REQUERIDO" required="true" styleClass="Wid100">
						
						<p:ajax event="dateSelect" listener="#{notaCreditoCtrl.cambioFechaEmision}" update="@this :formMain:oupPeriodoFiscal"/>
						
					</p:calendar>
					<p:message for="claNcFechaEmision" />
				</h:panelGroup>
				
				<h:outputText value="PERIODO FISCAL" styleClass="cpoRequerido"/>
				<h:panelGroup >
					<p:outputPanel id="oupPeriodoFiscal">
						<h:outputText value="#{notaCreditoCtrl.notaCreditoSeleccion.periodofiscal}"/>
					</p:outputPanel>
				</h:panelGroup>
				
				<h:outputText value="MOTIVO #{msg['label.anulacion']} *" styleClass="cpoRequerido"/>
				<h:panelGroup>
					<p:inputText id="intMotivoAnulacion" value="#{notaCreditoCtrl.notaCreditoSeleccion.motivo}" required="true" requiredMessage="REQUERIDO" styleClass="Wid100"/>
					<p:message for="intMotivoAnulacion" />
				</h:panelGroup>
				
			</p:panelGrid>
			
		</div>	
		
		<div class="EmptyBox5"/>
		
		<div class="card card-w-title">
			
			<h2 class="cardTitle"><i class="fa fa-check-circle"></i>  Documento Asociado</h2>
			
			<!-- Formulario -->
			<p:panelGrid id="gridNotaCreditoDG2" columns="1" styleClass="ui-panelgrid-blank Wid100" columnClasses="ui-g-12">
				
				<h:outputText value="CLIENTE *" styleClass="cpoRequerido"/>				
				<h:panelGroup>
					<p:selectOneMenu id="somNcCliente"
								value="#{notaCreditoCtrl.notaCreditoSeleccion.cliente}"
								converter="omnifaces.SelectItemsConverter"
								required="true"
								requiredMessage="REQUERIDO"
								styleClass="Wid100"
								filter="true" filterMatchMode="contains">
						<f:selectItem itemLabel="Seleccionar ..."
								itemValue="#{null}" value="#{null}" noSelectionOption="true" />
	
						<f:selectItems value="#{notaCreditoCtrl.clienteList}" var="cl"
							itemLabel="#{cl.razonsocial}" itemValue="#{cl}" />
						
						<p:ajax update=":formMain:inpNcRuc" />
							
					</p:selectOneMenu>
					<p:message for="somNcCliente" />
					
				</h:panelGroup>
				
				<h:outputText value="CI / RUC *" styleClass="cpoRequerido"/>
				<h:panelGroup>
					<p:inputText id="inpNcRuc" value="#{notaCreditoCtrl.notaCreditoSeleccion.cliente.identificacion}" required="true" requiredMessage="REQUERIDO" styleClass="Wid100" maxlength="15" readonly="true">
					</p:inputText>
					<p:message for="inpNcRuc" />
				</h:panelGroup>
				
				<h:outputText value="TIPO COMPROBANTE *" styleClass="cpoRequerido"/>
				<h:panelGroup>
					<p:selectOneMenu id="somNcTipComprobante"
								value="#{notaCreditoCtrl.notaCreditoSeleccion.tipocomprobanteretencion}"
								converter="omnifaces.SelectItemsConverter"
								required="true"
								requiredMessage="REQUERIDO"
								styleClass="Wid100"
								filter="true" filterMatchMode="contains">
						<f:selectItem itemLabel="Seleccionar ..."
								itemValue="#{null}" value="#{null}" noSelectionOption="true" />
	
						<f:selectItems value="#{notaCreditoCtrl.tipocomprobanteList}" var="tp"
							itemLabel="#{tp.comprobante}" itemValue="#{tp}" />
							
					</p:selectOneMenu>
					<p:message for="somNcTipComprobante" />
				</h:panelGroup>
				
				<h:outputText value="FECHA #{msg['label.emision']} *" styleClass="cpoRequerido"/>
				<h:panelGroup>
					<p:calendar id="claNcFechaEmisionAsociado" value="#{notaCreditoCtrl.notaCreditoSeleccion.fechaemisiondocasociado}"
						pattern="dd/MM/yyyy"
						locale="es" 
						requiredMessage="REQUERIDO" required="true" styleClass="Wid100">
						
						<p:ajax event="dateSelect" listener="#{notaCreditoCtrl.cambioFechaEmision}" update="@this :formMain:oupPeriodoFiscal"/>
						
					</p:calendar>
					<p:message for="claNcFechaEmisionAsociado" />
				</h:panelGroup>
				
				<h:outputText value="NUM DOCUMENTO *" styleClass="cpoRequerido"/>
				<h:panelGroup>
					<div class="ui-inputgroup">
	                    <span class="ui-inputgroup-addon">
	                        <p:commandButton id="cmdConsultarDocu"
								icon="fa fa-search" 
								action="#{notaCreditoCtrl.buscarNumDocumento()}" 
								styleClass="Fs12 Wid100 displayButton" 
								update="@form"
								process="@this :formMain:somNcTipComprobante :formMain:inpNcNumFac" title="BUSCAR"/>
	                    </span>
						<p:inputMask id="inpNcNumFac" value="#{notaCreditoCtrl.notaCreditoSeleccion.numfactura}" mask="999-999-999999999" required="true" requiredMessage="REQUERIDO" styleClass="Wid100" maxlength="17" validatorMessage="FORMATO 999-999-999999999" placeholder="FORMATO : 999-999-999999999">
							<f:converter converterId="formatoNumComprobanteConverter"/>
						</p:inputMask>
	                </div>
					<p:message for="inpNcNumFac" />
				</h:panelGroup>
				
			</p:panelGrid>
			
			<div class="EmptyBox5"/>
		<p:outputPanel id="oupInfoAdicionalMain">
			<h2 class="cardTitle">
				<i class="fa fa-check-circle"> Informaci√≥n Adicional</i>
				<p:spacer width="10"/>
				<p:commandLink value="Agregar" action="#{notaCreditoCtrl.agregarInfoAdicional()}" update="@form">			
				</p:commandLink>
			</h2>
			
			<p:outputPanel id="grdInfoAdicional" rendered="#{not empty notaCreditoCtrl.infoadicionalList}">
			
				<div class="EmptyBox5"/>
				
				<p:panelGrid id="grid4" columns="3" styleClass="ui-panelgrid-blank Wid100 Fs12" columnClasses="ui-g-5,ui-g-5,ui-g-2">
					<h:outputText value="NOMBRE *" styleClass="cpoRequerido" />
					<h:outputText value="#{msg['label.descripcion']} *" styleClass="cpoRequerido" />
				</p:panelGrid>
				
				<div class="p-grid p-align-center vertical-container">
					
					<p:repeat var="info" value="#{notaCreditoCtrl.infoadicionalList}" >
						<div class="p-col-5">
							<p:inputText id="inpInfoAdicionalNombre" styleClass="Wid100" value="#{info.nombre}" required="true" requiredMessage="REQUERIDO"/>
							<p:message for="inpInfoAdicionalNombre"/>
						</div>
						<div class="p-col-6">
							<p:inputText id="inpInfoAdicionalValor" styleClass="Wid100" value="#{info.valor}" required="true" requiredMessage="REQUERIDO"/>
							<p:message for="inpInfoAdicionalValor"/>
						</div>
						<div class="p-col-1" style="text-align: center;">
							<p:commandLink  action="#{notaCreditoCtrl.eliminarInfoAdicional()}" immediate="true" update=":formMain:msgFormMain :formMain:oupInfoAdicionalMain">
								<f:setPropertyActionListener value="#{info}" target="#{notaCreditoCtrl.infoadicionalSelected}"/>
								<i class="fa fa-trash-o Fs20" style="color:red;"></i>
								<p:confirm header="#{msg['label.confirmacion']}" message="#{msg['mensaje.confimacion']}" icon="fa fw-3x fa-exclamation-triangle" />
							</p:commandLink>
						</div>
					
					</p:repeat>
				</div>
			
			</p:outputPanel>
		</p:outputPanel>
		
		<div class="EmptyBox10"/>
			
		</div>	
		
	</div>
    

</ui:composition>
