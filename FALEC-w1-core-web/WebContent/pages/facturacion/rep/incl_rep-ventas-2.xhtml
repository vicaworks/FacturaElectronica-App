<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
				xmlns:of="http://omnifaces.org/functions">
	
	<style type="text/css">
		
		.pvDosDT .ui-datatable-scrollable-body{
			min-height: 35vh !important;
			
		}
		
	</style>
	
	<div class="card card-w-title">
		<h3 class="cardTitle">
			<i class="fa fa-arrow-circle-right"/>
			Facturas Emitidas
		</h3>
   		<div class="EmptyBox5"/>
    	<div class="p-grid p-align-center vertical-container">
    		
    		<div class="p-col-12 p-md-3">
    			<h:outputText value="Vendedor" styleClass="FontBold DispBlock" style="margin-bottom:5px;"/>
    			<p:selectOneMenu id="somVendedorRep2"
							value="#{repFacCtrl.usuarioSelected}"
							converter="omnifaces.SelectItemsConverter"
							required="false"
							requiredMessage="REQUERIDO"
							styleClass="Wid100">
					<f:selectItem itemLabel="TODOS" itemValue="#{null}"/>
					<f:selectItems value="#{repFacCtrl.usuarioList}" var="u2"
									itemLabel="#{u2.nombre}" itemValue="#{u2}" />	
				</p:selectOneMenu>
    		</div>
    		
    		<div class="p-col-12 p-md-3">
    			<h:outputText value="Criterio" styleClass="FontBold DispBlock" style="margin-bottom:5px;"/>
    			<p:inputText value="#{repFacCtrl.criterioBusqueda}" placeholder="#Factura, Cliente" styleClass="Wid100"/>
    		</div>
    		
    		<div class="p-col-12 p-md-2">
    			<h:outputText value="Desde" styleClass="FontBold DispBlock" style="margin-bottom:5px;"/>
	    		<p:calendar value="#{repFacCtrl.desde}"
					pattern="dd/MM/yyyy"
					locale="es" 
					requiredMessage="REQUERIDO" required="false" styleClass="Wid100 Fs14" placeholder="dd/MM/yyyy">
					
				</p:calendar>
    		</div>
    		
    		<div class="p-col-12 p-md-2">
    			<h:outputText value="Hasta" styleClass="FontBold DispBlock" style="margin-bottom:5px;"/>
	    		<p:calendar value="#{repFacCtrl.hasta}"
					pattern="dd/MM/yyyy"
					locale="es" 
					requiredMessage="REQUERIDO" required="false" styleClass="Wid100 Fs14" placeholder="dd/MM/yyyy">
					
				</p:calendar>
    		</div>
    		
    		<div class="p-col-12 p-md-2">
  					<div class="EmptyBox5"/>
  					<p:commandButton icon="fa fa-search" 
						action="#{repFacCtrl.buscar()}" styleClass="secondary-button Fs18" update="@form" style="margin-right:5px;"/>
						
  					<p:commandButton icon="fa fa-file-excel-o" 
						styleClass="success-btn Fs18" update="@form"
						ajax="false" onclick="PrimeFaces.monitorDownload(start,stop)">
						<p:fileDownload value="#{repFacCtrl.file}"/>
					</p:commandButton>
    		</div>
    		
    	</div>
    	
    	<div class="EmptyBox5"/>
    	<p:dataTable id="pvDosDT"
       			scrollable="true"
       			value="#{repFacCtrl.ventasQueryList}"
       			var="f"
       			emptyMessage="#{msg['mensaje.noexistenDatos']}"
				styleClass="pvDosDT Fs11"
				rows="13"
                paginator="true"
                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
                paginatorPosition="bottom"  
				rowKey="#{f.id}">
			
				<p:column headerText="N." style="width:80px;">
					<h:outputText value="#{repFacCtrl.getFormatoNumDocumento(f.numdocumento)}" />
				</p:column>
				
				<p:column headerText="FECHA" style="width:40px;">
					<h:outputText value="#{f.fechaemision}" >
						<f:convertDateTime pattern="dd/MM/yyyy"/>
					</h:outputText>
				</p:column>
				
				<p:column headerText="CLIENTE" style="width:125px;">
					<h:outputText value="#{f.razonsocial}" >
					</h:outputText>
				</p:column>
				
				<p:column headerText="VENDEDOR" style="width:40px;">
					<h:outputText value="#{f.nombrepantalla}" >
					</h:outputText>
				</p:column>
				
				<p:column headerText="SUBTOT" style="width:40px;" styleClass="TexAlRight">
					<h:outputText value="#{f.subtotal}">
						<f:convertNumber pattern="$#,##0.00"/>
					</h:outputText>
				</p:column>
				
				<p:column headerText="DESC" style="width:30px;" styleClass="TexAlRight">
					<h:outputText value="#{f.totaldescuento}" >
						<f:convertNumber pattern="$#,##0.00"/>
					</h:outputText>
				</p:column>
				
				<p:column headerText="TOT SIN IVA" style="width:40px;" styleClass="TexAlRight">
					<h:outputText value="#{f.totalsinimpuestos}" styleClass="markBlack">
						<f:convertNumber pattern="$#,##0.00"/>
					</h:outputText>
				</p:column>
				
				<p:column headerText="IVA" style="width:30px;" styleClass="TexAlRight">
					<h:outputText value="#{f.iva}" >
						<f:convertNumber pattern="$#,##0.00"/>
					</h:outputText>
				</p:column>
				
				<p:column headerText="ICE" style="width:30px;" styleClass="TexAlRight">
					<h:outputText value="#{f.ice}" >
						<f:convertNumber pattern="$#,##0.00"/>
					</h:outputText>
				</p:column>
				
				<p:column headerText="TOTAL" style="width:50px;" styleClass="TexAlRight">
					<h:outputText value="#{f.total}" styleClass="">
						<f:convertNumber pattern="$#,##0.00"/>
					</h:outputText>
				</p:column>
				
				<p:column headerText="#{msg['label.retencion']}" style="width:40px;" styleClass="TexAlRight">
					<h:outputText value="#{f.valorretenido}" styleClass="">
						<f:convertNumber pattern="$#,##0.00"/>
					</h:outputText>
				</p:column>
				
				<p:column headerText="A PAGAR" style="width:40px;" styleClass="TexAlRight">
					<h:outputText value="#{f.valorapagar}" styleClass="markGreen">
						<f:convertNumber pattern="$#,##0.00"/>
					</h:outputText>
				</p:column>
				
				<!-- <p:column headerText="PAGO" style="width:40px;" styleClass="TexAlRight">
					<h:outputText value="#{f.totalpago}" styleClass="">
						<f:convertNumber pattern="$#,##0.00"/>
					</h:outputText>
				</p:column> -->
				
						
		</p:dataTable>
    	
    	<div class="EmptyBox5"/>
    	<div class="p-grid p-justify-center">
    		
    		<div class="p-col-4 p-md-2" style="text-align: center;">
    			<h:outputText value="SUBTOTAL" styleClass="FontBold Fs9 DispBlock" style="color:gray;margin-bottom:5px;"/>
    			<h:outputText value="#{repFacCtrl.totalesDto.subtotal}" styleClass="Fs16 FontBold">
    				<f:convertNumber locale="es_EC" pattern="$ #,##0.00"/>
    			</h:outputText>
    		</div>
    		
    		<div class="p-col-4 p-md-2" style="text-align: center;">
    			<h:outputText value="DESCUENTO" styleClass="FontBold Fs9 DispBlock" style="color:gray;margin-bottom:5px;"/>
    			<h:outputText value="#{repFacCtrl.totalesDto.descuento}" styleClass="Fs16 FontBold">
    				<f:convertNumber locale="es_EC" pattern="$ #,##0.00"/>
    			</h:outputText>
    		</div>
    		<div class="p-col-4 p-md-2" style="text-align: center;">
    			<h:outputText value="TOT SIN IVA" styleClass="FontBold Fs9 DispBlock" style="color:gray;margin-bottom:5px;"/>
    			<h:outputText value="#{repFacCtrl.totalesDto.totalsinimpuestos}" styleClass="Fs16 FontBold markBlack">
    				<f:convertNumber locale="es_EC" pattern="$ #,##0.00"/>
    			</h:outputText>
    		</div>
    		<div class="p-col-4 p-md-2" style="text-align: center;">
    			<h:outputText value="I.V.A." styleClass="FontBold Fs9 DispBlock" style="color:gray;margin-bottom:5px;"/>
    			<h:outputText value="#{repFacCtrl.totalesDto.iva}" styleClass="Fs16 FontBold">
    				<f:convertNumber locale="es_EC" pattern="$ #,##0.00"/>
    			</h:outputText>
    		</div>
    		<div class="p-col-4 p-md-2" style="text-align: center;">
    			<h:outputText value="I.C.E" styleClass="FontBold Fs9 DispBlock" style="color:gray;margin-bottom:5px;"/>
    			<h:outputText value="#{repFacCtrl.totalesDto.ice}" styleClass="Fs16 FontBold">
    				<f:convertNumber locale="es_EC" pattern="$ #,##0.00"/>
    			</h:outputText>
    		</div>
    		<div class="p-col-4 p-md-2" style="text-align: center;">
    			<h:outputText value="TOTAL" styleClass="FontBold Fs9 DispBlock" style="color:gray;margin-bottom:5px;"/>
    			<h:outputText value="#{repFacCtrl.totalesDto.total}" styleClass="Fs16 FontBold markGreen">
    				<f:convertNumber locale="es_EC" pattern="$ #,##0.00"/>
    			</h:outputText>
    		</div>
    	</div>
    	
	</div>	
	
</ui:composition>
