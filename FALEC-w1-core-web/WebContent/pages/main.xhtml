<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template/template.xhtml">

    <ui:define name="title">Mako</ui:define>
    <!-- <ui:define name="viewname">
        <li>Components</li>
        <li>/</li>
        <li><p:link outcome="/sample">Sample Page</p:link></li>
    </ui:define> -->
    
    <ui:define name="head">
        <style type="text/css">

            /* @media (max-width:1024px) {
                .ui-panelgrid.form-elements .ui-grc-2 {
                    padding-left: 20px;
                }
            }
            
            @media (max-width:640px) {
                .ui-panelgrid.form-elements .ui-grc-2 {
                    padding-left: 6px;
                }
            } */
            
            .dialogDemo label {
                line-height: 2.1em;
            }
            
            .landing-body .landing-wrapper .landing-features {
				/* border-top: 8px solid #c7e7f2; */
				padding: 40px !important;
				/* background-color: #f4f4f9; */
			}
            
            /* ===================================================================== */
            .oneDT .ui-datatable-scrollable-body{
				min-height: 35vh !important;
				max-height: 35vh !important;
			}
			.twoDT .ui-datatable-scrollable-body{
				min-height: 35vh !important;
				max-height: 35vh !important;
			}
            .cardTitle{
				padding:0.3em 0px;
				font-size: 18px !important;
				color:#535b65;
			}
			
			.padding5{
				padding: 5px !important;
			}
			.padding10{
				padding: 10px !important;
			}
			.padding15{
				padding: 15px !important;
			}
			.padding20{
				padding: 20px !important;
			}
			.boxLink{
				border: 1px solid #ddd;
				padding: 10px 15px;
				color: #555;
			}
			.boxLink i{
				color: #555;
				margin-right: 10px;
			}
			.boxLink:hover{
				background-color: #f5f5f5;
				cursor: pointer;
			}
			.MtopNone{
				border-top: none;
			}
			.boxContentInfo{
				min-height: 200px;
			}
			.boxFooter{
				font-size: 18px;
				color:#555;
				text-align: center;
				padding: 20px;
				margin-bottom: 20px;
			}
			
			.bgGreen{
				background: #28cd5a;
				color: #fff;
			}
			
			.bgBlue{
				background: #188de0;
				color: #fff;
			}
			
			.bgCyan{
				background: #397d8e;
				color: #fff;
			}
			
			.bgNone{
				border-top: 1px solid #ddd;
				background-color: #fff;
				color: #555;
			}
			
        </style>
        <script>
		    function goToURL(url) {
		      location.href = url;
		
		    }
		  </script>
    </ui:define>

    <ui:define name="content">
    	<!-- <p:breadCrumb>
		    <p:menuitem url="#" />
		    <p:menuitem value="Panel" url="#{request.contextPath}/pages/main.jsf" />
		</p:breadCrumb> -->
		
        <h:form >
        	<div class="p-grid p-nogutter">
        		<div class="p-col-12 cmb_establecimiento" style="text-align: right;padding-right: 3px;margin-bottom: 3px;margin-top: 5px;">
	                
	                <p:selectOneMenu id="somEstablecimientoMain"
						value="#{mainCtrl.establecimientoMain}"
						converter="omnifaces.SelectItemsConverter"
						styleClass="cmb_establecimiento_wrapper"
						disabled="#{not mainCtrl.habilitarEstablecimientoMain}">
						
						<f:selectItems value="#{mainCtrl.establecimientoMainList}" var="st"
							itemLabel="#{st.nombrecomercial.concat(' - ').concat(appSessionCtrl.formatoCadena(st.codigoestablecimiento,3,'0'))}" itemValue="#{st}" />
						
						<p:ajax event="valueChange" listener="#{mainCtrl.buscar()}" update="@form"/>
							
					</p:selectOneMenu>
	                
	                
        		</div>
        	</div>
			<div class="p-grid">
				<!-- Configuracion inicial -->
				<div class="p-col-12 p-lg-6 padding10">
					<div class="card card-w-title" style="height:100%;">
						
						<h3 class="cardTitle" style="color:#252529;">Empieza con Mako</h3>
						<p style="margin-top:0px;">Configura el sistema para emitir comprobantes electrónicos.</p>
						<div class="EmptyBox5"/>
						<div class="p-grid Fs18" style="margin:0px 0px;">
							<div class="p-col-12 boxLink" onclick="alert('Link AAAAAA');">
								<i class="fa fa-check "></i>
								Configurar certificado de firma electrónica.
							</div>
							<div class="p-col-12 boxLink MtopNone"  onclick="alert('Link BBBBBBB');">
								<i class="fa fa-check"></i>
								Seleccionar la forma de pago.
							</div>
						</div>
						<div class="EmptyBox20"/>
					</div>
				</div>
				
				<!-- Reportes -->
				<div class="p-col-12 p-lg-6 padding10">
					<div class="card card-w-title">
						
						<h3 class="cardTitle">Reportes</h3>
						<p style="margin-top:0px;">Toda la información de tu negocio, en reportes consolidados.</p>
						<div class="EmptyBox5"/>
						<div class="p-grid Fs18" style="margin:0px 0px;">
							<div class="p-col-12 boxLink #{appSessionCtrl.accesoDisable('mn_panel_repventas')?'ui-state-disabled':''}" onclick="goToURL('facturacion/rep/repVentas.jsf');" >
								<i class="fa fa-external-link" style="color:green;"></i>
								Reporte de ventas.
							</div>
							<div class="p-col-12 boxLink MtopNone #{appSessionCtrl.accesoDisable('mn_panel_repprodcliente')?'ui-state-disabled':''}"  onclick="goToURL('reportes/rep_clienteproducto.jsf');">
								<i class="fa fa-external-link"></i>
								Productos vendidos a un cliente.
							</div>
							<div class="p-col-12 boxLink MtopNone #{appSessionCtrl.accesoDisable('mn_panel_repprodvendidos')?'ui-state-disabled':''}"  onclick="goToURL('reportes/rep_ventaproducto.jsf');">
								<i class="fa fa-external-link" style="color:blue;"></i>
								Productos mas vendidos.
							</div>
							<div class="p-col-12 boxLink MtopNone #{appSessionCtrl.accesoDisable('mn_panel_repinventario')?'ui-state-disabled':''}"  onclick="goToURL('productos/inventario.jsf');">
								<i class="fa fa-external-link"  style="color:orange;"></i>
								Inventario.
							</div>
						</div>
						<div class="EmptyBox20"/>
					</div>
				</div>
				
				<!-- Total de ventas -->
				<div class="p-col-12 p-lg-4 padding10">
					<div class="card card-w-title" style="padding: 0.5em 0.5em !important;">
						<div class="EmptyBox20"/>
						<h3 class="cardTitle" style="color:#535b65;">Total de ventas hoy</h3>
						<div class="EmptyBox20"/>
						<p:outputPanel rendered="#{mainCtrl.totalVentas!=null}">
							<div class="p-grid p-justify-center p-align-center vertical-container boxContentInfo bgGreen">
								<div class="p-col-12" style="text-align: center;">
									<h:outputText value="#{mainCtrl.totalVentas.totalconimpuestos}" styleClass="Fs50">
										<f:convertNumber pattern="#{appSessionCtrl.formatoMoneda}"/>
									</h:outputText>
									<div class="EmptyBox10"/>
									<div>
										<h:outputText value="Subtotal Facturas "/>
										<h:outputText value="#{mainCtrl.totalVentas.totalsinimpuestos}">
											<f:convertNumber pattern="#{appSessionCtrl.formatoMoneda}"/>
										</h:outputText>
									</div>
									<div>
										<h:outputText value="Impuetos "/>
										<h:outputText value="#{mainCtrl.totalVentas.impuestos}">
											<f:convertNumber pattern="#{appSessionCtrl.formatoMoneda}"/>
										</h:outputText>
									</div>
									<div>
										<h:outputText value="Subtotal Recibos "/>
										<h:outputText value="#{mainCtrl.totalVentas.totalrecibos}">
											<f:convertNumber pattern="#{appSessionCtrl.formatoMoneda}"/>
										</h:outputText>
									</div>
								</div>
							</div>
						</p:outputPanel>
						<p:outputPanel rendered="#{mainCtrl.totalVentas==null}">
							<div class="p-grid p-justify-center p-align-center vertical-container boxContentInfo bgNone">
								<div class="p-col-12" style="text-align: center;">
									<i class="fa fa-language" style="font-size: 80px;"/>
									
								</div>
							</div>
						</p:outputPanel>
						<div class="boxFooter">
							<h:outputText value="Total de documentos: #{mainCtrl.totalVentas.contador}" rendered="#{mainCtrl.totalVentas!=null}"/>
							<h:outputText value="No existe información" rendered="#{mainCtrl.totalVentas==null}">
							</h:outputText>
						</div>
					</div>
				</div>
				
				<!-- Consumo promedio -->
				<div class="p-col-12 p-lg-4 padding10">
					<div class="card card-w-title" style="padding: 0.5em 0.5em !important;">
						<div class="EmptyBox20"/>
						<h3 class="cardTitle" style="color:#535b65;">Consumo Promedio</h3>
						<div class="EmptyBox20"/>
						<p:outputPanel rendered="#{mainCtrl.promedioConsumo!=null}">
							<div class="p-grid p-justify-center p-align-center vertical-container boxContentInfo bgBlue">
								<div class="p-col-12" style="text-align: center;">
									<h:outputText value="#{mainCtrl.promedioConsumo}" styleClass="Fs50">
										<f:convertNumber pattern="#{appSessionCtrl.formatoMoneda}"/>
									</h:outputText>
									<div class="EmptyBox10"/>
									<h:outputText value="Promedio de consumo por venta" styleClass="DispBlock">
									</h:outputText>
									<h:outputText value=" " styleClass="DispBlock">
									</h:outputText>
									<h:outputText value=" " styleClass="DispBlock">
									</h:outputText>
								</div>
							</div>
						</p:outputPanel>
						<p:outputPanel rendered="#{mainCtrl.promedioConsumo==null}">
							<div class="p-grid p-justify-center p-align-center vertical-container boxContentInfo bgNone">
								<div class="p-col-12" style="text-align: center;">
									<i class="fa fa-language" style="font-size: 80px;"/>
									
								</div>
							</div>
						</p:outputPanel>
						<div class="boxFooter">
							<h:outputText value="Últimos 21 días" rendered="#{mainCtrl.promedioConsumo!=null}"/>
							<h:outputText value="No existe información" rendered="#{mainCtrl.promedioConsumo==null}">
							</h:outputText>
						</div>
					</div>
				</div>
				
				<!-- total clientes -->
				<div class="p-col-12 p-lg-4 padding10">
					<div class="card card-w-title" style="padding: 0.5em 0.5em !important;">
						<div class="EmptyBox20"/>
						<h3 class="cardTitle" style="color:#535b65;">Total de Clientes</h3>
						<div class="EmptyBox20"/>
						<p:outputPanel rendered="#{mainCtrl.contadorClientes!=null}">
							<div class="p-grid p-justify-center p-align-center vertical-container boxContentInfo bgCyan">
								<div class="p-col-12" style="text-align: center;">
									<h:outputText value="#{mainCtrl.contadorClientes}" styleClass="Fs50">
										<f:convertNumber pattern="#{appSessionCtrl.formatoInteger}"/>
									</h:outputText>
									<div class="EmptyBox10"/>
									<h:outputText value="Clientes" styleClass="DispBlock">
									</h:outputText>
									<h:outputText value=" " styleClass="DispBlock">
									</h:outputText>
									<h:outputText value=" " styleClass="DispBlock">
									</h:outputText>
								</div>
							</div>
						</p:outputPanel>
						<p:outputPanel rendered="#{mainCtrl.contadorClientes==null}">
							<div class="p-grid p-justify-center p-align-center vertical-container boxContentInfo bgNone">
								<div class="p-col-12" style="text-align: center;">
									<i class="fa fa-language" style="font-size: 80px;"/>
									
								</div>
							</div>
						</p:outputPanel>
						<div class="boxFooter">
							<h:outputText value="Últimos 21 días" rendered="#{mainCtrl.promedioConsumo!=null}"/>
							<h:outputText value="No existe información" rendered="#{mainCtrl.promedioConsumo==null}">
							</h:outputText>
						</div>
					</div>
				</div>
				
				<!-- Productos mas vendidos -->
				<div class="p-col-12 p-lg-6 padding10">
					<div class="card card-w-title" style="padding: 0.5em 0.5em !important;">
						<div class="EmptyBox20"/>
						<h3 class="cardTitle" style="color:#535b65;">Ítems más vendidos</h3>
						<div class="EmptyBox20"/>
						
						<p:dataTable id="oneDT" var="c"
							value="#{mainCtrl.productosMasVendidos}" scrollable="true"
							emptyMessage="#{msg['mensaje.noexistenDatos']}"
							styleClass="oneDT Fs11"  
							rowKey="#{c.idproducto}"
							paginator="true"
			                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
			                currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
			                paginatorPosition="bottom"  
							rows="10"
							rowsPerPageTemplate="10,15,20,25,30,35,40">
							
							<p:column headerText="COD" style="width:25%;">
								<h:outputText value="#{c.codigoprincipal}" />
							</p:column>
							
							<p:column headerText="ITEM" style="width:55%;">
								<h:outputText value="#{c.nombregenerico}" />
							</p:column>
							
							<p:column headerText="CANTIDAD" style="width:20%;" styleClass="TexAlRight">
								<h:outputText value="#{c.cantidad}" >
									<f:convertNumber pattern="#{appSessionCtrl.formatoInteger}"/>
								</h:outputText>
							</p:column>
							
						</p:dataTable>
						
						<div class="boxFooter">
							<h:outputText value="Últimos 21 días" rendered="#{not empty mainCtrl.productosMasVendidos}"/>
							<h:outputText value="No existe información" rendered="#{empty mainCtrl.productosMasVendidos}">
							</h:outputText>
						</div>
					</div>
				</div>
				
				<!-- Ventas del dia de hoy -->
				<div class="p-col-12 p-lg-6 padding10">
					<div class="card card-w-title" style="padding: 0.5em 0.5em !important;">
						<div class="EmptyBox20"/>
						<h3 class="cardTitle" style="color:#535b65;">Ventas</h3>
						<div class="EmptyBox20"/>
						
						<p:dataTable id="twoDT" var="c"
							value="#{mainCtrl.resumenVentas}" scrollable="true"
							emptyMessage="#{msg['mensaje.noexistenDatos']}"
							styleClass="twoDT Fs11"  
							rowKey="#{c.idcabecera}"
							paginator="true"
			                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
			                currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
			                paginatorPosition="bottom"  
							rows="10"
							rowsPerPageTemplate="10,15,20,25,30,35,40">
							
							<p:column headerText="" style="width:15%;">
								<h:outputText value="#{c.identificador=='00'?'REC':'FAC'}" styleClass="#{c.identificador=='00'?' ':'markGray'}"/>
							</p:column>
							
							<p:column headerText="NUM" style="width:20%;">
								<h:outputText value="#{mainCtrl.getFormatoNumDocumento(c.numdocumento)}" />
							</p:column>
							
							<p:column headerText="CLIENTE" style="width:30%;">
								<h:outputText value="#{c.razonsocial}" />
							</p:column>
							
							<p:column headerText="HORA" style="width:15%;"	>
								<h:outputText value="#{c.updated}" >
									<f:convertDateTime pattern="HH:mm"/>
								</h:outputText>
							</p:column>
							
							<p:column headerText="TOTAL" style="width:20%;" styleClass="TexAlRight">
								<h:outputText value="#{c.totalconimpuestos}" >
									<f:convertNumber pattern="#{appSessionCtrl.formatoMoneda}"/>
								</h:outputText>
							</p:column>
							
						</p:dataTable>
						
						<div class="boxFooter">
							<h:outputText value="Día de hoy" rendered="#{not empty mainCtrl.resumenVentas}"/>
							<h:outputText value="No existe información" rendered="#{empty mainCtrl.resumenVentas}">
							</h:outputText>
						</div>
					</div>
				</div>
				
			</div>
			        	
        		
        </h:form>
        
    </ui:define>

</ui:composition>
