<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
				xmlns:of="http://omnifaces.org/functions"
				xmlns:pe="http://primefaces.org/ui/extensions">
	
	<style type="text/css">
		.establecimientoDT .ui-datatable-scrollable-body {
			min-height: 30vh !important;
			height: calc(100vh - 200px)!important;
		}
		/* @media screen and (max-width: 40em){
			.ui-fileupload-buttonbar .ui-button .ui-button-text {
 				display: block !important;
 				padding: 0px !important;
			}
		} */
	</style>	
	
	<div class="tool-bar my-1">
		<p:commandButton value="Buscar"
				icon="fa fa-search fs-12"
				action="#{establecimientoCtrl.refrescar()}"
				styleClass="fs-12 min-width-100 ui-button-success" update="@form"/>
		
		<p:commandButton value="Nuevo"
				 icon="fa-regular fa-file fs-12" 
				 styleClass="fs-12 min-width-100 ui-button-outlined"
				 action="#{establecimientoCtrl.nuevo()}"
				 />
	</div>
	
	<div class="card">
		
		<p:dataTable var="estab"
					value="#{establecimientoCtrl.establecimientoAllList}"
					scrollable="true" styleClass="establecimientoDT Fs11"
					rowKey="#{estab.codigoestablecimiento}">

			<p:column headerText="Opción" style="width:10px;">
				
				<p:commandLink id="cmlDtEstablecimiento">
					<i class="fa fa-chevron-circle-down fs-18" style="color:#252529;"/>
				</p:commandLink>
				
				<p:menu overlay="true" trigger="cmlDtEstablecimiento" my="left top" at="left bottom">
					<p:menuitem value="Editar" action="#{establecimientoCtrl.editar()}" icon="fa fa-edit fs-12">
						<f:setPropertyActionListener value="#{estab}" target="#{establecimientoCtrl.establecimientoSelected}" />
					</p:menuitem>
					<p:menuitem value="Eliminar" action="#{establecimientoCtrl.eliminar()}" update="@form" icon="fa-regular fa-trash-can fs-12" >
						<f:setPropertyActionListener value="#{estab}"
						target="#{establecimientoCtrl.establecimientoSelected}" />
						<p:confirm header="#{msg['label.confirmacion']}"
							message="#{msg['mensaje.confimacion']}"
							icon="fa fw-3x fa-exclamation-triangle" />
					</p:menuitem>
				</p:menu>
			</p:column>
			
			<p:column headerText="#{msg['label.codigo']}"
				style="width:20px;" styleClass="text-right">
				<h:outputText value="#{appSessionCtrl.formatoCadena(estab.codigoestablecimiento,3,'0')}" />
			</p:column>

			<p:column headerText="Matríz"
				style="width:20px; text-align: center;">
				<h:outputText value="#{estab.matriz}" />
			</p:column>
			
			<p:column headerText="Nombre comercial" priority="1"
				style="width:120px; ">
				<h:outputText value="#{estab.nombrecomercial}" />
			</p:column>
			
			<p:column headerText="#{msg['label.direccion']}" style="width:120px;">
				<h:outputText value="#{estab.direccionestablecimiento}" />
			</p:column>

			<p:column headerText="#{msg['label.telefono']}" style="width:70px;" styleClass="text-right pr-3">
				<h:outputText value="#{estab.telefono}" />
			</p:column>

			<p:column headerText="Email" style="width:90px;">
				<h:outputText value="#{estab.correo}" />
			</p:column>
			
			<p:column headerText="Ambiente"
				style="width:40px; ">
				<h:outputText value="#{estab.ambiente==1? 'Pruebas':'Produccion'}" />
			</p:column>

		</p:dataTable>
		
	</div>

</ui:composition>
