<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
				xmlns:of="http://omnifaces.org/functions">
	
	<style type="text/css">
	</style>
	
	<div class="card" >
		
		<div class="grid">
			<div class="col-12 md:col-8">
				<div class="flex gap-1">
					<div class="flex-grow-1 flex flex-column  gap-1">
						<span class="text-gra-700 fs-11 block">Fechas</span>
						<div class="flex gap-1">
							
							<p:selectOneMenu id="somEstablecimientoMain"
								value="#{cotizacionCtrl.establecimientoMain}"
								converter="omnifaces.SelectItemsConverter"
								styleClass="flex-1"
								disabled="#{not facEmitidaCtrl.habilitarEstablecimientoMain}">
								
								<f:selectItems value="#{cotizacionCtrl.establecimientoMainList}" var="st"
									itemLabel="#{appSessionCtrl.formatoCadena(st.codigoestablecimiento,3,'0').concat(' - ').concat(st.nombrecomercial)}" itemValue="#{st}" />
								
								<p:ajax event="valueChange" listener="#{facEmitidaCtrl.buscar()}" update="@form"/>								
							</p:selectOneMenu>		                
							<p:calendar id="calDesde3" value="#{cotizacionRepCtrl.desde}"
								pattern="dd/MM/yyyy"
								locale="es" 
								requiredMessage="Requerido" required="true" styleClass="flex-1" placeholder="dd/MM/yyyy">
							</p:calendar>				
							<p:calendar id="calHasta3" value="#{cotizacionRepCtrl.hasta}"
								pattern="dd/MM/yyyy"
								locale="es" 
								requiredMessage="Requerido" required="true" styleClass="flex-1" placeholder="dd/MM/yyyy">
							</p:calendar>	
						</div>
					</div>
					<div class="flex-grow-0 flex align-items-end" style="height: 35.23px;">
						<p:commandButton 
								icon="fa fa-search"
								action="#{cotizacionRepCtrl.buscar()}" styleClass="ui-button-success" update="@form" value="Buscar"/>
					</div>
				</div>
			</div>
		</div>
	
	</div>
	
	<div class="grid align-content-start">
		
		<div class="col-12 lg:col-6">
			
			<div class="card card-w-title" >
				
				<span class="block fs-18 text-gray-900 fw-5 divisor">Cantidad de Cotizaciones</span>
				
				<p:outputPanel rendered="#{cotizacionRepCtrl.getTotal(cotizacionRepCtrl.facturadoContadorList)>0}">
					<p:pieChart model="#{cotizacionRepCtrl.pieFacturadoContador}" />
				</p:outputPanel>
				
				<p:outputPanel rendered="#{cotizacionRepCtrl.getTotal(cotizacionRepCtrl.facturadoContadorList)==0}">
					<div class="grid align-items-center justify-content-center" style="height:200px!important;">
						<div class="col-12" style="text-align: center;">
							<i class="fa fa-language" style="font-size: 80px;"/>
							
						</div>
					</div>				
				</p:outputPanel>
				
				
				<p:dataTable
		       			value="#{cotizacionRepCtrl.facturadoContadorList}"
		       			var="v"
		       			emptyMessage="#{msg['mensaje.noexistenDatos']}"
						styleClass="fs-11 mt-2 mb-2"
						rowKey="#{v.label1}">
					<p:column headerText="Estado" style="width:50%;">
						<div class="grid mt-1 ml-1">
							<div class="col-3">
								<h:outputText value="A" style="background-color: rgb(195, 155, 211);color:rgb(195, 155, 211);" styleClass="block" rendered="#{v.label1=='SEGUIMIENTO'}"/>
								<h:outputText value="A" style="background-color: rgb(127, 179, 213);color:rgb(127, 179, 213);" styleClass="block" rendered="#{v.label1=='ARCHIVADO'}"/>
								<h:outputText value="A" style="background-color: rgb(36, 113, 163);color:rgb(36, 113, 163);" styleClass="block" rendered="#{v.label1=='FACTURADO'}"/>
							</div>
							<div class="col-9">
								<h:outputText value="#{v.label1}"/>
							</div>
						</div>
					</p:column>
					
					<p:column headerText="Cantidad" style="width:50%;" styleClass="text-right">
						<div class="grid mt-1">
							<div class="col-12">
								<h:outputText value="#{v.valor1.intValue()}" styleClass="#{v.valor1.intValue()==0?'opacity-50':''}" style="color:#252529;"/>
							</div>
						</div>
					</p:column>
					
				</p:dataTable>
				
			</div>
			
					
		
		</div>
		
		<div class="col-12 lg:col-6">
			<div class="card" >
				
				<span class="block fs-18 text-gray-900 fw-5 divisor">Valor Total de Cotizaciones</span>
				
				<p:outputPanel rendered="#{cotizacionRepCtrl.getTotal(cotizacionRepCtrl.facturadoValorList)>0}">
					<p:pieChart model="#{cotizacionRepCtrl.pieFacturadoValor}"/>
				</p:outputPanel>
				
				<p:outputPanel rendered="#{cotizacionRepCtrl.getTotal(cotizacionRepCtrl.facturadoValorList)==0}">
					<div class="grid align-items-center justify-content-center" style="height:200px!important;">
						<div class="col-12" style="text-align: center;">
							<i class="fa fa-language" style="font-size: 80px;"/>
							
						</div>
					</div>				
				</p:outputPanel>
				
				<p:dataTable
		       			value="#{cotizacionRepCtrl.facturadoValorList}"
		       			var="p"
		       			emptyMessage="#{msg['mensaje.noexistenDatos']}"
						styleClass="fs-11 mt-2 mb-2"
						rowKey="#{p.label1}">
					<p:column headerText="Estado" style="width:50%;">
						<div class="grid mt-1 ml-1">
							<div class="col-3">
								<h:outputText value="A" style="background-color: rgb(195, 155, 211);color:rgb(195, 155, 211);" styleClass="block" rendered="#{p.label1=='SEGUIMIENTO'}"/>
								<h:outputText value="A" style="background-color: rgb(127, 179, 213);color:rgb(127, 179, 213);" styleClass="block" rendered="#{p.label1=='ARCHIVADO'}"/>
								<h:outputText value="A" style="background-color: rgb(36, 113, 163);color:rgb(36, 113, 163);" styleClass="block" rendered="#{p.label1=='FACTURADO'}"/>
							</div>
							<div class="col-9">
								<h:outputText value="#{p.label1}"/>
							</div>
						</div>
					</p:column>
					
					<p:column headerText="Valor" style="width:50%;" styleClass="text-right">
						<div class="grid mt-1">
							<div class="col-12">
								<h:outputText value="#{p.valor1.intValue()}" styleClass="#{p.valor1.intValue()==0?'opacity-50':''}" style="color:#252529;">
									<f:convertNumber pattern="$ #,##0.00"/>
								</h:outputText>
							</div>
						</div>
					</p:column>
					
				</p:dataTable>
				
			</div>
		</div>
		
		<div class="col-12">
			<div class="card" >
			
				<span class="block fs-18 text-gray-900 fw-5 divisor">Cantidad de cotizaciones por vendedor</span>
				
				<p:outputPanel rendered="#{not empty cotizacionRepCtrl.facturadoVendedorContadorList}">
					<p:chart type="bar" model="#{cotizacionRepCtrl.barFacturadoVendedorContador}"  responsive="true"/>
				</p:outputPanel>
				
				<p:outputPanel rendered="#{empty cotizacionRepCtrl.facturadoVendedorContadorList}">
					<div class="grid align-items-center justify-content-center" style="height:200px!important;">
						<div class="col-12" style="text-align: center;">
							<i class="fa fa-language" style="font-size: 80px;"/>							
						</div>
					</div>				
				</p:outputPanel>
				
				<p:dataTable
		       			value="#{cotizacionRepCtrl.facturadoVendedorContadorList}"
		       			var="v1"
		       			emptyMessage="#{msg['mensaje.noexistenDatos']}"
						styleClass="fs-11 mt-2 mb-2"
						rowKey="#{v1.label1}"
						rendered="#{not empty cotizacionRepCtrl.facturadoVendedorContadorList}">
					<p:column headerText="Vendedor" style="width:40%;">
						<h:outputText value="#{v1.label1}"/>
					</p:column>
					
					<p:column headerText="Facturado" style="width:20%;" styleClass="text-right">
						<div class="grid mt-1">
							<div class="col-12">
								<h:outputText value="#{v1.valor1.intValue()}" styleClass="#{v1.valor1.intValue()==0?'opacity-50':''}" style="color:#252529;">
									<f:convertNumber pattern="#,##0"/>
								</h:outputText>
							</div>
						</div>
					</p:column>
					
					<p:column headerText="Archivado" style="width:20%;" styleClass="text-right">
						<div class="grid mt-1">
							<div class="col-12">
								<h:outputText value="#{v1.valor2.intValue()}" styleClass="#{v1.valor2.intValue()==0?'opacity-50':''}" style="color:#252529;">
									<f:convertNumber pattern="#,##0"/>
								</h:outputText>
							</div>
						</div>
					</p:column>
					
					<p:column headerText="Seguimiento" style="width:20%;" styleClass="text-right">
						<div class="grid mt-1">
							<div class="col-12">
								<h:outputText value="#{v1.valor3.intValue()}" styleClass="#{v1.valor3.intValue()==0?'opacity-50':''}" style="color:#252529;">
									<f:convertNumber pattern="#,##0"/>
								</h:outputText>
							</div>
						</div>
					</p:column>
					
				</p:dataTable>
				
			</div>
							
		</div>
		
		<div class="col-12">
			<div class="card" >
			
				<span class="block fs-18 text-gray-900 fw-5 divisor">Valor total de cotizaciones por vendedor</span>
				
				<p:outputPanel rendered="#{not empty cotizacionRepCtrl.facturadoVendedorValorList}">
					<p:chart type="bar" model="#{cotizacionRepCtrl.barFacturadoVendedorValor}" responsive="true"/>
				</p:outputPanel>
				
				<p:outputPanel rendered="#{empty cotizacionRepCtrl.facturadoVendedorValorList}">
					<div class="grid align-items-center justify-content-center" style="height:200px!important;">
						<div class="col-12" style="text-align: center;">
							<i class="fa fa-language" style="font-size: 80px;"/>
							
						</div>
					</div>				
				</p:outputPanel>
				
				<p:dataTable
		       			value="#{cotizacionRepCtrl.facturadoVendedorValorList}"
		       			var="v2"
		       			emptyMessage="#{msg['mensaje.noexistenDatos']}"
						styleClass="fs-11 mt-2 mb-2"
						rowKey="#{v2.label1}"
						rendered="#{not empty cotizacionRepCtrl.facturadoVendedorValorList}">
					<p:column headerText="Vendedor" style="width:40%;">
						<h:outputText value="#{v2.label1}"/>
					</p:column>
					
					<p:column headerText="Facturado" style="width:20%;" styleClass="text-right">
						<div class="grid mt-1">
							<div class="col-12">
								<h:outputText value="#{v2.valor1.intValue()}" styleClass="#{v2.valor1.intValue()==0?'opacity-50':''}" style="color:#252529;">
									<f:convertNumber pattern="$ #,##0.00"/>
								</h:outputText>
							</div>
						</div>
					</p:column>
					
					<p:column headerText="Archivado" style="width:20%;" styleClass="text-right">
						<div class="grid mt-1">
							<div class="col-12">
								<h:outputText value="#{v2.valor2.intValue()}" styleClass="#{v2.valor2.intValue()==0?'opacity-50':''}" style="color:#252529;">
									<f:convertNumber pattern="$ #,##0.00"/>
								</h:outputText>
							</div>
						</div>
					</p:column>
					
					<p:column headerText="Seguimiento" style="width:20%;" styleClass="text-right">
						<div class="grid mt-1">
							<div class="col-12">
								<h:outputText value="#{v2.valor3.intValue()}" styleClass="#{v2.valor3.intValue()==0?'opacity-50':''}" style="color:#252529;">
									<f:convertNumber pattern="$ #,##0.00"/>
								</h:outputText>
							</div>
						</div>
					</p:column>
					
				</p:dataTable>
				
			</div>
							
		</div>
		
	</div>
	
	
	

</ui:composition>
