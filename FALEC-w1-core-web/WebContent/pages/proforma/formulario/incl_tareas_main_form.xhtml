<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
				xmlns:of="http://omnifaces.org/functions"
				xmlns:pe="http://primefaces.org/ui/extensions">
	
    <style type="text/css">
 		.pvDosDT .ui-datatable-scrollable-body{
			min-height: 45vh !important;
			height: calc(100vh - 415px)!important;				
		}      	
    </style>
	
	<div class="card card-w-title" >
		
		<div class="EmptyBox5"/>
		<div class="p-grid p-align-top ui-fluid">
			<div class="p-col-12 p-md-2">
				<h:outputText value="ESTABLECIMIENTO" styleClass="DispBlock p-mb-1"/>
	    		<p:selectOneMenu id="somtareaEstablecimeinto"
							value="#{tareaCotMainCtrl.establecimientoMain}"
							converter="omnifaces.SelectItemsConverter"
							styleClass="Wid100"
							disabled="#{not cotizacionCtrl.habilitarEstablecimientoMain}">
							
					<f:selectItems value="#{tareaCotMainCtrl.establecimientoMainList}" var="st1"
						itemLabel="#{st1.nombrecomercial.concat(' - ').concat(appSessionCtrl.formatoCadena(st1.codigoestablecimiento,3,'0'))}" itemValue="#{st1}" />
					
					<!-- <p:ajax event="valueChange" listener="#{cotizacionCtrl.buscar()}" update="@form"/> -->
						
				</p:selectOneMenu>
			</div>
			<div class="p-col-12 p-md-2">
				<h:outputText value="ESTADO" styleClass="DispBlock p-mb-1"/>
	    		<p:selectOneMenu id="somtareaEst"
							value="#"
							styleClass="Wid100">
					
					<f:selectItem itemLabel="TODOS" itemValue="#{null}"/>								
					<f:selectItem itemLabel="PENDIENTE" itemValue="PENDIENTE"/>
					<f:selectItem itemLabel="PENDIENTE-VENCIDO" itemValue="PENDIENTE-VENCIDO"/>
					<f:selectItem itemLabel="CERRADO" itemValue="PENDIENTE"/>
						
				</p:selectOneMenu>
			</div>
			
			<div class="p-col-12 p-md-2">
				<h:outputText value="PRIORIDAD" styleClass="DispBlock p-mb-1"/>
	    		<p:selectOneMenu id="somtareaPrioridad"
							value="#"
							styleClass="Wid100">
					
					<f:selectItem itemLabel="TODOS" itemValue="#{null}"/>								
					<f:selectItem itemLabel="IMPORTANTE" itemValue="IMPORTANTE"/>
					<f:selectItem itemLabel="IMPORTANTE-ALTA" itemValue="IMPORTANTE-ALTA"/>
					<f:selectItem itemLabel="ALTA" itemValue="ALTA"/>
					<f:selectItem itemLabel="MEDIA" itemValue="MEDIA"/>
					<f:selectItem itemLabel="BAJA" itemValue="BAJA"/>
						
				</p:selectOneMenu>
			</div>
			
			<div class="p-col-12 p-md-6">
				<h:outputText value="USUARIO" styleClass="DispBlock p-mb-1"/>
	    		<p:selectOneMenu id="somtareaUsuario"
							value="#"
							styleClass="Wid100">
					
				</p:selectOneMenu>
			</div>
			
			<div class="p-col-12 p-md-6">
				<h:outputText value="CLIENTE" styleClass="DispBlock p-mb-1"/>
	    		<p:selectOneMenu id="somtareaCliente"
							value="#"
							styleClass="Wid100">
					
				</p:selectOneMenu>
			</div>
			
			<div class="p-col-12 p-md-2">
				<h:outputText value="NUM COTIZACIÓN" styleClass="DispBlock p-mb-1"/>
	    		<p:inputText ></p:inputText>
			</div>
			
			<div class="p-col-6 p-md-2 p-as-end">
    			<p:commandButton 
							icon="fa fa-search"
							action="#" styleClass="secondary-button Wid100" update="@form" style="margin-right:5px;" value="BUSCAR"/>
			</div>
			
			<div class="p-col-6 p-md-2 p-as-end">
				<p:commandButton id="cmdGlobalExcel2"
	  						value="EXPORTAR"
							icon="fa fa-file-excel-o" 
							styleClass="secondary-button Wid100">
				</p:commandButton>				
				<!-- <p:menu overlay="true" trigger="cmdGlobalExcel2" my="left top" at="left bottom" style="width:250px !important;">
					<p:menuitem value="Exportar excel" icon="fa fa-file-excel-o" ajax="false">
						<p:fileDownload value="#{cotizacionCtrl.fileResumen}" contentDisposition="inline"/>
					</p:menuitem>
					<p:menuitem value="Exportar excel(detalle)" icon="fa fa-list" ajax="false">
						<p:fileDownload value="#{cotizacionCtrl.fileDetalle}" contentDisposition="inline"/>
					</p:menuitem>
				</p:menu> -->
			</div>
			
		</div>				
	
	</div>
	
	<!-- Mensajes -->
	<p:messages id="msgtarea" rendered="#{not facesContext.validationFailed}" showSummary="true" showDetail="true" for="formMain"
		closable="true" >
		<p:autoUpdate></p:autoUpdate>
	</p:messages>
	<div class="EmptyBox5"/>
	<div class="card card-w-title">
		
		<div class="p-d-flex p-flex-column">
			<div class="p-order-2 p-mt-2 p-order-md-1 p-mt-md-0">
				
				<div class="p-grid p-jc-around">
					<div class="p-col-6 p-md-3">
						
						<div class="cardContador cardContador-bgBlack">
							<div class="cardContador-header">
								<h:outputText value="CERRADO" />
							</div>
							<div class="cardContador-content">
								<h:outputText value="#{100}" >
									<f:convertNumber pattern="#{appSessionCtrl.formatoInteger}"/>
								</h:outputText>
							</div>
						</div>
						
					</div>
					
					<div class="p-col-6 p-md-3">
						
						<div class="cardContador cardContador-borderGreen">
							<div class="cardContador-header">
								<h:outputText value="PENDIENTE" />
							</div>
							<div class="cardContador-content">
								<h:outputText value="#{100}" >
									<f:convertNumber pattern="#{appSessionCtrl.formatoInteger}"/>
								</h:outputText>
							</div>
						</div>
						
					</div>
					
					<div class="p-col-6 p-md-3">
						
						<div class="cardContador cardContador-borderOrange">
							<div class="cardContador-header">
								<h:outputText value="VENCIDO" />
							</div>
							<div class="cardContador-content">
								<h:outputText value="#{100}" >
									<f:convertNumber pattern="#{appSessionCtrl.formatoInteger}"/>
								</h:outputText>
							</div>
						</div>
						
					</div>
					
					
				</div>
				
			</div>
			
			<div class="p-order-1 p-order-md-2">
				
				<p:dataTable id="pvDosDT"
		       			scrollable="true"
		       			value="#{tareaCotMainCtrl.tareacabeceraList}"
		       			var="t"
		       			emptyMessage="#{msg['mensaje.noexistenDatos']}"
						styleClass="pvDosDT Fs11"
		                paginator="true"
		                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		                currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
		                paginatorPosition="bottom"  
						rowKey="#{t.idtareacabecera}"
						rows="20"
						rowsPerPageTemplate="10,15,20,25,30,35,40">
						
						
						<p:column headerText="OPC" style="width:20px;" styleClass="TexAlCenter">
							<p:commandLink id="cmlDttareas">
								<i class="fa fa-chevron-circle-down Fs18" style="color:#252529;"/>
							</p:commandLink>
							<p:menu overlay="true" trigger="cmlDttareas" my="left top" at="left bottom">
								
								<p:menuitem value=" Imprimir" action="#" icon="fa fa-print" process="pvDosDT" update="@form:tarea:pvDosDT @form:tarea:msgtarea">
								</p:menuitem>
								
								<p:menuitem value=" Agregar tarea" action="#" icon="fa fa-plus" process="pvDosDT" update="@form:tarea:pvDosDT @form:tarea:msgtarea">
								</p:menuitem>
								
								<p:menuitem value=" Cerrar tarea" action="#" icon="fa fa-times-circle" process="pvDosDT" update="@form:tarea:pvDosDT @form:tarea:msgtarea">
								</p:menuitem>
								
								<p:menuitem value=" Editar tarea" action="#" icon="fa fa-edit" process="pvDosDT" update="@form:tarea:pvDosDT @form:tarea:msgtarea">
								</p:menuitem>
								
								<p:menuitem value=" Eliminar" action="#" icon="fa fa-close" process="pvDosDT" update="@form:tarea:pvDosDT @form:tarea:msgtarea">
								</p:menuitem>
							
							</p:menu>
						</p:column>
						
						<p:column headerText="FECHA" style="width:40px;">
							<h:outputText value="#{t.fechalimite}" >
								<f:convertDateTime pattern="dd/MM/yyyy"/>
							</h:outputText>
						</p:column>
						
						<p:column headerText="ESTADO" style="width:50px;">
							<h:outputText value="#{t.estado}" >
							</h:outputText>
						</p:column>
						
						<p:column headerText="PRIORIDAD" style="width:50px;">
							<h:outputText value="#{t.prioridad}" >
							</h:outputText>
						</p:column>
						
						<p:column headerText="TAREA" style="width:150px;">
							<div class="p-grid p-m-1">
								<div class="p-col-12">
									<h:outputText value="#{t.tareaetiqueta.etiqueta}" />
								</div>
								<div class="p-col-12 p-p-1 p-pl-2">
									<h:outputText value="#{t.descripcion}" />
								</div>
							</div>
						</p:column>
						
						<p:column headerText="ESTA" style="width:20px;" filterBy="#{t.cabecera.establecimiento.codigoestablecimiento}" filterMatchMode="contains">
							<h:outputText value="#{appSessionCtrl.formatoCadena(t.cabecera.establecimiento.codigoestablecimiento,3,'0')}" >
							</h:outputText>
						</p:column>
						
						<p:column headerText="COTIZACIÓN" style="width:50px;">
							<h:outputText value="#{facEmitidaCtrl.getFormatoNumDocumento(t.cabecera.numdocumento)}" >
							</h:outputText>
						</p:column>
						
						<p:column headerText="FECHA" style="width:40px;">
							<h:outputText value="#{t.cabecera.fechaemision}" >
								<f:convertDateTime pattern="dd/MM/yyyy"/>
							</h:outputText>
						</p:column>
						
						<p:column headerText="ESTADO" style="width:50px;">
							<h:outputText value="#{t.cabecera.estado}" >
							</h:outputText>
						</p:column>
						
						<p:column headerText="CLIENTE" style="width:150px;">
							<h:outputText value="#{t.cabecera.cliente.razonsocial}" >
							</h:outputText>
						</p:column>
						
						
				</p:dataTable>
				
				
			</div>
		
		</div>
		
	</div>
	<div class="EmptyBox20"/>
</ui:composition>
