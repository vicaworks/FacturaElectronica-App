<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
				xmlns:of="http://omnifaces.org/functions">
	
	<style type="text/css">
    	
    	.pvPagoDetalleDT .ui-datatable-scrollable-body{
			min-height: 30vh !important;
			height: calc(100vh - 480px)!important;
		}
    	
    	.digito-btn{
    		font-family: "Inter UI", sans-serif;
    		border: 1px solid #264d73;
    		background-color:#eaeff3;
    		border-radius: 4px;
    		width: 30.5%;
    		text-align: center;
    		padding: 0.38em;
    		color:#264d73;
    		display: inline-block;
    		font-size: 22px;
    	}
    	
    	.digito-btn:hover{
    		border: 1px solid black;
    		background: black;
    		color:#fff;
    	}
    	
    	
    	.digito-mrg-righ{
    		margin-right:1px; 
    	}
    	
    	.digito-mrg-bottom{
    		margin-bottom:2px; 
    	}
    	
    	.opcion-btn{
    		border-radius: 2px;
    		width: 100%;
    		text-align: center;
    		padding: 0.39em 0.42em;
    		color:black;
    		display: inline-block;
    		font-size: 18px;
    		border: 1px solid black;
    	}
    	
    	.back-btn{
    		border: 1px solid #252529;
    		color:black;
    	}
    	
    	.back-btn:hover{
    		background-color:#252529;
    		color:#fff;
    	}
    	
    	.documento-btn {
			border: 1px solid #264d73;
			color: #264d73;
			/* padding: 0.55em !important; */
		}
    	
    	.documento-btn:hover{
    		background-color:#264d73;
    		color:#fff;
    	}
    	
    	.documento-btn-seleccion{
    		background-color:#264d73;
    		color:#fff;
    	}
    	
    	.documento-btn-seleccion:hover{
    		/* border: 1px solid orange;
    		background-color:#fff;
    		color:orange; */
    	}
    	
	</style>
	
	
	<div class="card ui-fluid">
		
        <!-- detalle del pago -->
        <p:outputPanel id="oupPagoDT">
	        <p:dataTable id="pvPagoDetalleDT"
	        			scrollable="true"
	        			value="#{factMainPagoCtrl.pagoList}"
	        			var="p"
	        			emptyMessage="#{msg['mensaje.noexistenDatos']}"
						styleClass="pvPagoDetalleDT fs-11"  
						rowKey="#{p.idpago}"
						selectionMode="single"
						selection="#{factMainPagoCtrl.pagoSelected}">
				
				
				<p:ajax event="rowSelect" listener="#{factMainPagoCtrl.seleccionarDetalle()}" update=":formMain:pvPagoDetalleDT :formMain:msgFormMain :formMain:oupInicioOpcionCalculadora :formMain:oupCalMenuDerecha">
				</p:ajax>
						
				<p:column headerText="Pago" style="width:100%;">
					
					<div class="flex gap-2 align-items-strech my-2" >
						<div class="flex-0 flex align-items-center justify-content-center px-4">
							<p:commandLink  action="#{factMainPagoCtrl.eliminarDetalle()}" 
								process="@this :formMain:pvPagoDetalleDT" 
								update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupInicioOpcionCalculadora">
								<f:setPropertyActionListener value="#{p}" target="#{factMainPagoCtrl.pagoSelected}"/>
								<i class="fa-regular fa-trash-can fs-20 text-gray-900"></i>
								<p:confirm header="#{msg['label.confirmacion']}" message="#{msg['mensaje.confimacion']}" icon="fa fw-3x fa-exclamation-triangle" />
							</p:commandLink>
						</div>
						
						<p:commandLink action="#{factMainPagoCtrl.seleccionarDetalle()}"
							process="@form"
							update=":formMain:pvPagoDetalleDT :formMain:msgFormMain :formMain:oupInicioOpcionCalculadora :formMain:oupCalMenuDerecha"
							styleClass="flex-1 ui-fluid">
							<f:setPropertyActionListener value="#{p}" target="#{factMainPagoCtrl.pagoSelected}"/>
							<span class="flex text-gray-900 fs-14">#{p.tipopago.nombre}</span>
							
							<div class="flex gap-1">
								<div class="flex-1 field">
									<label class="text-gray-900">Valor pago</label>
									<p:inputNumber value="#{p.total}" modifyValueOnWheel="false" readonly="true" styleClass="text-right w-full fs-14" inputStyleClass="fs-14" inputStyle="background-color: rgba(242, 242, 242, 0.1);"/>
								</div>
								<f:subview rendered="#{p.tipopago.subdetalle == '1'}">
										<div class="flex-1 field">
											<label class="text-gray-900">Importe</label>
											<p:inputNumber value="#{p.valorentrega}" modifyValueOnWheel="false" readonly="true" styleClass="text-right w-full fs-14" inputStyleClass="fs-14" inputStyle="background-color: rgba(242, 242, 242, 0.1);"/>
										</div>
										<div class="flex-1 field">
											<label class="text-gray-900">Cambio</label>
											<p:inputNumber value="#{p.cambio}" modifyValueOnWheel="false" readonly="true" styleClass="text-right w-full fs-14" inputStyleClass="fs-14" inputStyle="background-color: rgba(242, 242, 242, 0.1);"/>
										</div>
								</f:subview>
								
								<f:subview rendered="#{p.tipopago.subdetalle != '1'}">
									<div class="flex-1 field">
										<label class="text-gray-900">Banco</label>
										<p:inputText id="inpDetpagoBanco"
											value="#{p.nombrebanco}" 
											required="false"
											requiredMessage="Requerido"
											maxlength="50" 
											placeholder="Nombre de banco" 
											styleClass="fs-14">
										</p:inputText>
									</div>
									<div class="flex-1 field">
										<label class="text-gray-900 hidden md:block">NÃºmero de documento</label>
										<label class="text-gray-900 block md:hidden"># documento</label>
										<p:inputText readonly="true"
											value="#{p.numerodocumento}"
											style="background-color: rgba(242, 242, 242, 0.1);"
											styleClass="fs-14"></p:inputText>
									</div>
								</f:subview>
							</div>
								
						</p:commandLink>
						
					</div>
					
				</p:column>
				
	        </p:dataTable>
			
			<div class="flex justify-content-center align-items-center" style="height: 3rem;margin: 1rem 0;">
				<div class="flex-1 flex gap-1 align-items-baseline justify-content-center">
					<h:outputText value="#{factMainPagoCtrl.cabecerSelected.totalconimpuestos}" styleClass="fs-18 text-gray-900 fw-5">
	            		<f:convertNumber  pattern="#{appSessionCtrl.formatoMoneda}"/>
	            	</h:outputText>
					<span class="fs-12 text-gray-900">A pagar</span>
				</div>
				<p:divider layout="vertical" styleClass="flex-0 px-1">
	                <b class="fs-20">=</b>
	            </p:divider>
				<div class="flex-1 flex gap-1 align-items-baseline justify-content-center">
					<h:outputText value="#{factMainPagoCtrl.totalPago}" styleClass="fs-18 text-green-500 font-semibold">
	            		<f:convertNumber  pattern="#{appSessionCtrl.formatoMoneda}"/>
	            	</h:outputText>
					<span class="fs-12 text-green-600">Pago</span>
				</div>
			</div>
			
        </p:outputPanel>
        
		<!-- calculadora -->
		<div class="grid justify-content-center mt-2">
		
			<!-- menu izquierda -->
			<div class="col-3">
				<p:outputPanel id="oupInicioOpcionCalculadora" styleClass="flex gap-1 flex-column">
					<p:commandLink action="#" update=":formMain:oupInicioOpcionCalculadora">
						<f:setPropertyActionListener value="VALOR" target="#{factMainPagoCtrl.opcionSeleccionCalculadora}"/>
						<f:setPropertyActionListener value="#{true}" target="#{factMainPagoCtrl.inicioCalculadora}"/>
						<f:setPropertyActionListener value="#{null}" target="#{factMainPagoCtrl.separadorDecimal}"/>
						<div class="opcion-btn #{factMainPagoCtrl.opcionSeleccionCalculadora=='VALOR'?'documento-btn-seleccion':'documento-btn'}">
							<h:outputText value="Valor" styleClass="block fw-5 fs-14"/>
						</div>
					</p:commandLink>
					
					<p:commandLink action="#" update=":formMain:oupInicioOpcionCalculadora">
						<f:setPropertyActionListener value="CAMBIO" target="#{factMainPagoCtrl.opcionSeleccionCalculadora}"/>
						<f:setPropertyActionListener value="#{true}" target="#{factMainPagoCtrl.inicioCalculadora}"/>
						<f:setPropertyActionListener value="#{null}" target="#{factMainPagoCtrl.separadorDecimal}"/>
						<div class="opcion-btn #{factMainPagoCtrl.opcionSeleccionCalculadora=='CAMBIO'?'documento-btn-seleccion':'documento-btn'}">
							<h:outputText value="Importe" styleClass="block fw-5 fs-14"/>
						</div>
					</p:commandLink>
						
					<p:commandLink action="#" update=":formMain:oupInicioOpcionCalculadora">
						<f:setPropertyActionListener value="DOCUMENTO" target="#{factMainPagoCtrl.opcionSeleccionCalculadora}"/>
						<f:setPropertyActionListener value="#{true}" target="#{factMainPagoCtrl.inicioCalculadora}"/>
						<f:setPropertyActionListener value="#{null}" target="#{factMainPagoCtrl.separadorDecimal}"/>
						<div class="opcion-btn #{factMainPagoCtrl.opcionSeleccionCalculadora=='DOCUMENTO'?'documento-btn-seleccion':'documento-btn'}">
							<h:outputText value="Num. Doc." styleClass="block fw-5 fs-14"/>
						</div>
					</p:commandLink>
				</p:outputPanel>
			</div>
			
			<!-- numeros -->
			<div class="col-6" style="text-align: center;">
				<p:commandLink action="#{factMainPagoCtrl.ejecutarCalculadora('1')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="#{1}" styleClass="block fw-5"/>
					</div>
				</p:commandLink>
				<p:commandLink action="#{factMainPagoCtrl.ejecutarCalculadora('2')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="#{2}" styleClass="block fw-5"/>
					</div>
				</p:commandLink>				
				<p:commandLink action="#{factMainPagoCtrl.ejecutarCalculadora('3')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="#{3}" styleClass="block fw-5"/>
					</div>
				</p:commandLink>
				<p:commandLink action="#{factMainPagoCtrl.ejecutarCalculadora('4')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="#{4}" styleClass="block fw-5"/>
					</div>
				</p:commandLink>
				<p:commandLink action="#{factMainPagoCtrl.ejecutarCalculadora('5')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="#{5}" styleClass="block fw-5"/>
					</div>
				</p:commandLink>
				<p:commandLink action="#{factMainPagoCtrl.ejecutarCalculadora('6')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="#{6}" styleClass="block fw-5"/>
					</div>
				</p:commandLink>
				<p:commandLink action="#{factMainPagoCtrl.ejecutarCalculadora('7')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="#{7}" styleClass="block fw-5"/>
					</div>
				</p:commandLink>
				<p:commandLink action="#{factMainPagoCtrl.ejecutarCalculadora('8')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="#{8}" styleClass="block fw-5"/>
					</div>
				</p:commandLink>
				<p:commandLink action="#{factMainPagoCtrl.ejecutarCalculadora('9')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="#{9}" styleClass="block fw-5"/>
					</div>
				</p:commandLink>
				<p:commandLink action="#{factMainPagoCtrl.seleccionOpcionCalculadora('C')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="C" styleClass="block fw-5"/>
					</div>
				</p:commandLink>
				<p:commandLink action="#{factMainPagoCtrl.ejecutarCalculadora('0')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="#{0}" styleClass="block fw-5"/>
					</div>
				</p:commandLink>
				<p:commandLink action="#">
					<f:setPropertyActionListener value="." target="#{factMainPagoCtrl.separadorDecimal}"/>
					<div class="digito-btn digito-mrg-righ digito-mrg-bottom">
						<h:outputText value="." styleClass="block fw-5"/>
					</div>
				</p:commandLink>
			</div>
			
			<!-- Menu izquierda -->
			<div class="col-3">
				<p:outputPanel id="oupCalMenuDerecha" styleClass="flex gap-1 flex-column">
					<p:commandLink action="#{factMainPagoCtrl.seleccionOpcionCalculadora('+1')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
						<div class="opcion-btn borde-gray ">
							<h:outputText value="+1" styleClass="block fw-5"/>
						</div>
					</p:commandLink>
					<p:commandLink action="#{factMainPagoCtrl.seleccionOpcionCalculadora('+5')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
						<div class="opcion-btn borde-gray ">
							<h:outputText value="+5" styleClass="block fw-5"/>
						</div>
					</p:commandLink>
					<p:commandLink action="#{factMainPagoCtrl.seleccionOpcionCalculadora('+10')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
						<div class="opcion-btn borde-gray ">
							<h:outputText value="+10" styleClass="block fw-5"/>
						</div>
					</p:commandLink>
					<p:commandLink action="#{factMainPagoCtrl.seleccionOpcionCalculadora('+20')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
						<div class="opcion-btn borde-gray ">
							<h:outputText value="+20" styleClass="block fw-5"/>
						</div>
					</p:commandLink>
					<p:commandLink action="#{factMainPagoCtrl.seleccionOpcionCalculadora('back')}" update=":formMain:msgFormMain :formMain:oupPagoDT :formMain:oupCalMenuDerecha">
						<div class="opcion-btn back-btn">
							<i class="fa fa-arrow-circle-left fs-20"></i>
						</div>
					</p:commandLink>
				</p:outputPanel>		
			</div>
				
		</div>
	</div>
	
</ui:composition>
