<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
				xmlns:of="http://omnifaces.org/functions">
	
	<style type="text/css">
    	
    	.tipo-pagos{
    		margin: 1rem 0;
    		display: flex;
    		gap:.5rem;
    		justify-content: center;
    		flex-wrap: wrap;
    	}
    	
    	
    	.tipo-pago-card{
    		display: flex;
    		flex-direction: column;
    		gap: .5rem;
        	width: 14rem;
    		height: 6rem;
    		padding: .5rem;
    		text-decoration: none;
    		border: 1px solid #0059b3;
    		background-color: #fff;
    		border-radius: .6rem;
    	}
    	
    	@media (min-width: 480px) {
	        .tipo-pago-card{
	    		width: 17rem;
	        }
	    }
    	
    	a.tipo-pago-card{
    		-webkit-transition: background-color 4ms linear;
		    -moz-transition: background-color 4ms linear;
		    -o-transition: background-color 4ms linear;
		    -ms-transition: background-color 4ms linear;
		    transition: background-color 5ms linear;
    	}
    	
    	a.tipo-pago-card:hover{
    		background-color: #e6f2ff;
    	}
    	
    	.tipo-pago-card .tipo-pago-card__content{
    		display: flex;
    		align-items: center;
        	height: 3rem;
   			font-size: 1.5rem;
    		color: black;    		
    	}
    	
    	@media (min-width: 480px) {
	        .tipo-pago-card .tipo-pago-card__content{
	    		height: 4rem;
	    		font-size: 2rem;
	        }
	    }
    	
    	.tipo-pago-card .tipo-pago-card__footer{
    		display: flex;
    		justify-content: end;
    		align-items: center;
        	height: 2rem;
   			font-size: 1.8rem;
    		color: #0059b3;	
    	}
    	
    	.tipo-pagos:nth-child(1)::before {
		  	position: absolute;
	        content: '';
	        border-bottom: 1px solid #d9d9d9;
	        bottom: 0;
	        width: 80%;
	        margin: 0 auto;
		}
    	
	</style>
	
	<!-- consulta cliente return keycode 13 -->
	<p:remoteCommand name="buscarCliente"  
		action="#{factMainPagoCtrl.buscarCliente()}" 
		process="@this :formMain:inpCriterioCliente" 
		update=":formMain:msgFormMain :formMain:gridCliente"/>
	
	<div class="card">
		
		
		<div class="grid grid-nogutter ui-fluid">
			<div class="col-12">
				<div class="field">
					<label class="text-gray-900 fw-5 fs-12">Fecha</label>
					<p:calendar id="claFacFecha" value="#{factMainPagoCtrl.cabecerSelected.fechaemision}"
						pattern="dd/MM/yyyy"
						locale="es" 
						requiredMessage="REQUERIDO" required="true" styleClass="Wid100 Fs14">
					</p:calendar>
					
				</div>
			</div>
			<div class="col-12">
				<label class="text-gray-900 fw-5 fs-12">Cliente</label>
				<div class="flex gap-1">
					<div class="flex-grow-0 flex">
						
						<p:commandLink styleClass="min-width-100 border-1 border-gray-400" 
							style="height:24px;" 
							action="#{factMainPagoCtrl.buscarConsumidorFinal()}" 
							immediate="true" 
							update=":formMain:msgFormMain :formMain:gridCliente">
							
							<div class="flex align-items-center justify-content-evenly" style="height:24px;">
								<i class="fa fa-users mr-1 text-gray-700"></i>
								<span class="text-gray-700">CONS. FINAL</span>
							</div>
							
						</p:commandLink>						
					</div>
					
					<div class="flex-grow-1 flex overflow-hidden">
						<div class="ui-inputgroup w-full">
		                    <p:inputText id="inpCriterioCliente"
								value="#{factMainPagoCtrl.criterioCliente}" required="false"
								requiredMessage="Requerido" styleClass="w-full fs-12"
								maxlength="13" placeholder="C.I. o RUC / Enter para buscar"
								validatorMessage="Solo números"
								onkeydown="if(event.keyCode==13){event.keyCode=123;buscarCliente(); return false;}">
								<f:validateRegex pattern="^\d+$" />
							</p:inputText>
		                    <p:commandButton icon="pi pi-search" 
		                    	styleClass="ui-button-success" 
		                    	process="@this :formMain:inpCriterioCliente"
								action="#{factMainPagoCtrl.buscarCliente()}" 
								immediate="true"
								update=":formMain:msgFormMain :formMain:gridCliente">
							</p:commandButton>
		                </div>
					</div>
					
					<div class="flex-grow-0 flex align-items-center px-1">
					
						<p:commandLink 
							action="#{clienteCtrl.nuevoEditar(factMainPagoCtrl.cabecerSelected.cliente!=null?factMainPagoCtrl.cabecerSelected.cliente.idcliente:null)}" 
							process="@this" 
							styleClass="ml-1 mr-2 text-gray-900">
							<i class="fa fa-plus fs-16"/>
							<f:setPropertyActionListener value="FactMainPagoCtrl" target="#{clienteCtrl.callModule}"/>
							<f:setPropertyActionListener value=":formMain:gridCliente" target="#{clienteCtrl.updateView}"/>
							<f:setPropertyActionListener value="#{null}" target="#{clienteCtrl.clienteSelected}"/>
						</p:commandLink>
														
						<p:commandLink 
							action="#{clienteCtrl.nuevoEditar(factMainPagoCtrl.cabecerSelected.cliente!=null?factMainPagoCtrl.cabecerSelected.cliente.idcliente:null)}" 
							process="@this" 
							styleClass="text-gray-900">
							<i class="fa fa-edit fs-16"/>
							<f:setPropertyActionListener value="FactMainPagoCtrl" target="#{clienteCtrl.callModule}"/>
							<f:setPropertyActionListener value=":formMain:gridCliente" target="#{clienteCtrl.updateView}"/>
							<f:setPropertyActionListener value="#{null}" target="#{clienteCtrl.clienteSelected}"/>
						</p:commandLink>
						
					</div>
			
					
				</div>
				
				
			</div>
			<div class="col-12">
				<p:outputPanel id="gridCliente" styleClass="w-full my-1 flex " style="height:9rem;">
					<p:skeleton styleClass="w-full mt-1" height="9rem" rendered="#{factMainPagoCtrl.cabecerSelected.cliente==null}"/>
					<f:subview rendered="#{factMainPagoCtrl.cabecerSelected.cliente!=null}">
						<div class="flex flex-column my-1 gap-1">
							<span class="fs-16 fw-5 text-primary-600 block">
								<h:outputText value="#{factMainPagoCtrl.cabecerSelected.cliente.razonsocial!=null?factMainPagoCtrl.cabecerSelected.cliente.razonsocial:'-'}" />
							</span>
							<span class="fs-12 font-medium text-gray-900 block">
								<h:outputText value="#{factMainPagoCtrl.cabecerSelected.cliente.identificacion!=null?factMainPagoCtrl.cabecerSelected.cliente.identificacion:'-'}" />
							</span>
							<span class="fs-11 mb-1 block">
								<h:outputText value="#{factMainPagoCtrl.cabecerSelected.cliente.direccion!=null?factMainPagoCtrl.cabecerSelected.cliente.direccion:'-'}" />
							</span>
							<span class="fs-11 mb-1 block flex gap-2">
								<i class="pi pi-phone"></i>
								<h:outputText value="#{factMainPagoCtrl.cabecerSelected.cliente.telefono!=null?factMainPagoCtrl.cabecerSelected.cliente.telefono:'-'}" />
							</span>
							<span class="fs-11 mb-1 block flex gap-2">
								<i class="fa-regular fa-envelope"></i>
								<h:outputText value="#{factMainPagoCtrl.cabecerSelected.cliente.correoelectronico!=null?factMainPagoCtrl.cabecerSelected.cliente.correoelectronico:'-'}" />
							</span>
							
						</div>
					</f:subview>
				</p:outputPanel>
			</div>
			
		</div>
		
		<div class="tipo-pagos">
			
			<p:commandLink action="#{factMainPagoCtrl.agregarPago(TipoPagoFormularioEnum.EFECTIVO)}" 
				update=":formMain:msgFormMain :formMain:oupInicioOpcionCalculadora :formMain:oupPagoDT"
				styleClass="tipo-pago-card">
				<div class="tipo-pago-card__content">
					<span>Efectivo</span>
				</div>
				<div class="tipo-pago-card__footer">
					<i class="fa-regular fa-money-bill-1"></i>
				</div>
			</p:commandLink>
			
			<p:commandLink action="#{factMainPagoCtrl.agregarPago(TipoPagoFormularioEnum.TRANSFERENCIA)}" 
				update=":formMain:msgFormMain :formMain:oupInicioOpcionCalculadora :formMain:oupPagoDT"
				styleClass="tipo-pago-card">
				<div class="tipo-pago-card__content">
					<span>Transferencia</span>
				</div>
				<div class="tipo-pago-card__footer">
					<i class="fa-solid fa-money-bill-transfer"></i>
				</div>
			</p:commandLink>
			
			<p:commandLink action="#{factMainPagoCtrl.agregarPago(TipoPagoFormularioEnum.TARJETA_CREDITO)}"  
				update=":formMain:msgFormMain :formMain:oupInicioOpcionCalculadora :formMain:oupPagoDT"
				styleClass="tipo-pago-card">
				<div class="tipo-pago-card__content">
					<span>Tarj Crédito</span>
				</div>
				<div class="tipo-pago-card__footer">
					<i class="fa-brands fa-cc-visa"></i>
				</div>
			</p:commandLink>
			
			<p:commandLink action="#{factMainPagoCtrl.agregarPago(TipoPagoFormularioEnum.TARJETA_DEBITO)}"  
				update=":formMain:msgFormMain :formMain:oupInicioOpcionCalculadora :formMain:oupPagoDT"
				styleClass="tipo-pago-card">
				<div class="tipo-pago-card__content">
					<span>Tarj Débito</span>
				</div>
				<div class="tipo-pago-card__footer">
					<i class="fa-regular fa-credit-card"></i>
				</div>
			</p:commandLink>
			
			<p:commandLink action="#{factMainPagoCtrl.agregarPago(TipoPagoFormularioEnum.DEPOSITO)}"  
				update=":formMain:msgFormMain :formMain:oupInicioOpcionCalculadora :formMain:oupPagoDT"
				styleClass="tipo-pago-card">
				<div class="tipo-pago-card__content">
					<span>Depósito</span>
				</div>
				<div class="tipo-pago-card__footer">
					<i class="fa-solid fa-filter-circle-dollar"></i>
				</div>
			</p:commandLink>
			
			<p:commandLink action="#{factMainPagoCtrl.agregarPago(TipoPagoFormularioEnum.CHEQUE)}"  
				update=":formMain:msgFormMain :formMain:oupInicioOpcionCalculadora :formMain:oupPagoDT"
				styleClass="tipo-pago-card">
				<div class="tipo-pago-card__content">
					<span>Cheque</span>
				</div>
				<div class="tipo-pago-card__footer">
					<i class="fa-solid fa-money-bill-wheat"></i>
				</div>
			</p:commandLink>
			
		</div>
		
			
	</div>
	
</ui:composition>
