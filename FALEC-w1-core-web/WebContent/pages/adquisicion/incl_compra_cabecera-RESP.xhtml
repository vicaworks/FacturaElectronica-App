<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
				xmlns:of="http://omnifaces.org/functions">
	
	<style type="text/css">
		
		.heightFrmAdqPago {
				height: 300px;
		}
		
	</style>
	
	<!-- consulta proveedor return keycode 13 -->
	<p:remoteCommand name="buscarProveedor"  action="#{adquisicionFrmCtrl.buscarProveedor()}" process="@this :formMain:inpCriterioProveedor" update=":formMain:msgFormMain :formMain:msgInpCriterioProveedor :formMain:gridAdProveedor"/>
	
	<div class="card card-w-title">
		
		<h2 class="cardTitle"><i class="fa fa-check-circle"></i>  Comprobante de Compra</h2>
		
		<!-- Formulario -->
		<div class="EmptyBox5"/>
		<p:panelGrid id="gridAdProveedor" columns="1" styleClass="ui-panelgrid-blank Wid100" columnClasses="ui-g-12">
			<h:panelGroup>
				<h:outputText value="ESTABLECIMIENTO - #{appSessionCtrl.formatoCadena(adquisicionFrmCtrl.establecimientoMain.codigoestablecimiento,3,'0')}" styleClass="cpoRequerido"/>
			</h:panelGroup>
			<h:outputText value="" styleClass="cpoRequerido"/>
			
			<h:outputText value="PROVEEDOR *" styleClass="cpoRequerido"/>
			<h:panelGroup>
				<div class="ui-inputgroup">
	                <span class="ui-inputgroup-addon">
	                	
	                	<p:commandButton process="@this :formMain:inpCriterioProveedor"
							update=":formMain:msgFormMain :formMain:msgInpCriterioProveedor :formMain:gridAdProveedor" 
							action="#{adquisicionFrmCtrl.buscarProveedor()}" icon="fa fa-search">
	                	</p:commandButton>
	                
	                </span>
	                
	                <p:inputText id="inpCriterioProveedor"
						value="#{adquisicionFrmCtrl.criterioProveedor}" required="false"
						requiredMessage="REQUERIDO" styleClass="Wid100 Fs12"
						maxlength="13" placeholder="C.I. o RUC / ENTER PARA BUSCAR"
						validatorMessage="SOLO NUMEROS"
						onkeydown="if(event.keyCode==13){event.keyCode=123;buscarProveedor(); return false;}">
						<f:validateRegex pattern="^\d+$" />
					</p:inputText>
	                
	            </div>
	            <p:message id="msgInpCriterioProveedor" for="inpCriterioProveedor" styleClass="Wid100"/>
			</h:panelGroup>
			
			
			<h:panelGroup>
				<div class="EmptyBox5"/>
				<div class="p-grid">
					<div class="p-col-12 p-md-6">
						<p:commandButton value="PROVEEDOR/ EDITAR" action="#{clienteCtrl.nuevoEditar(adquisicionFrmCtrl.adquisicionSelected.cliente!=null?adquisicionFrmCtrl.adquisicionSelected.cliente.idcliente:null)}" process="@this" icon="fa fa-plus" styleClass="Wid100">
							<f:setPropertyActionListener value="ADQUISICION" target="#{clienteCtrl.callModule}"/>
							<f:setPropertyActionListener value=":formMain:msgFormMain :formMain:gridAdProveedor" target="#{clienteCtrl.updateView}"/>
							<f:setPropertyActionListener value="#{adquisicionFrmCtrl}" target="#{clienteCtrl.adquisicionFrmCtrl}"/>
						</p:commandButton>
					</div>
					<div class="p-col-12 p-md-6">
						<p:commandButton value="BUSCAR" action="#{listaClienteCtrl.cargarPantalla()}" immediate="true" icon="fa fa-search" styleClass="secondary-button Wid100">
							<f:setPropertyActionListener value="#{adquisicionFrmCtrl}" target="#{listaClienteCtrl.adquisicionFrmCtrl}"/>
							<f:setPropertyActionListener value="ADQUISICION" target="#{listaClienteCtrl.callModule}"/>
							<f:setPropertyActionListener value=":formMain:msgFormMain :formMain:gridAdProveedor" target="#{listaClienteCtrl.viewUpdate}"/>
							<f:setPropertyActionListener value="formMain" target="#{listaClienteCtrl.formModule}"/>
						</p:commandButton>
					</div>
				</div>
			</h:panelGroup>
			
			
			
			<h:outputText value="C.I./RUC * " styleClass="cpoRequerido"/>
			<h:panelGroup>
				<p:inputText id="inpNcRuc" value="#{adquisicionFrmCtrl.adquisicionSelected.cliente.identificacion}" required="true" requiredMessage="REQUERIDO" styleClass="disable-color Wid100" readonly="true">
				</p:inputText>
				<p:message for="inpNcRuc" />
			</h:panelGroup>
			
			<h:outputText value="NOMBRE * " styleClass="cpoRequerido"/>
			<h:panelGroup>
				<p:inputText id="inpNCNombre" value="#{adquisicionFrmCtrl.adquisicionSelected.cliente.razonsocial}" required="true" requiredMessage="REQUERIDO" styleClass="disable-color Wid100" readonly="true">
				</p:inputText>
				<p:message for="inpNCNombre" />
			</h:panelGroup>
			
			<h:outputText value="EMAIL * " styleClass="cpoRequerido"/>
			<h:panelGroup>
				<p:inputText id="inpNcEmail" value="#{adquisicionFrmCtrl.adquisicionSelected.cliente.correoelectronico}" required="true" requiredMessage="REQUERIDO" styleClass="disable-color Wid100" readonly="true">
				</p:inputText>
				<p:message for="inpNcEmail" />
			</h:panelGroup>
			
			<h:outputText value="#{msg['label.direccion']} * " styleClass="cpoRequerido"/>
			<h:panelGroup>
				<p:inputText id="inpNcDireccion" value="#{adquisicionFrmCtrl.adquisicionSelected.cliente.direccion}" required="true" requiredMessage="REQUERIDO" styleClass="disable-color Wid100" readonly="true">
				</p:inputText>
				<p:message for="inpNcDireccion" />
			</h:panelGroup>
			
		</p:panelGrid>
		<div class="EmptyBox5"/>
		<p:panelGrid id="gridProductoDG" columns="1" styleClass="ui-panelgrid-blank Wid100" columnClasses="ui-g-12">
			
			<h:outputText value="TIPO COMPROBANTE DE VENTA *" styleClass="cpoRequerido"/>
			<h:panelGroup>
				<p:selectOneMenu id="somAdqTipComprobante"
							value="#{adquisicionFrmCtrl.adquisicionSelected.tipocomprobante}"
							converter="omnifaces.SelectItemsConverter"
							required="true"
							requiredMessage="REQUERIDO"
							styleClass="Wid100"
							filter="true" filterMatchMode="contains">
					<f:selectItem itemLabel="Seleccionar ..."
							itemValue="#{null}" value="#{null}" noSelectionOption="true" />

					<f:selectItems value="#{adquisicionFrmCtrl.tipocomprobanteList}" var="tp"
						itemLabel="#{tp.comprobante}" itemValue="#{tp}" />
						
				</p:selectOneMenu>
				<p:message for="somAdqTipComprobante" />
			</h:panelGroup>
				
			<h:outputText value="FECHA #{msg['label.emision']} *" styleClass="cpoRequerido"/>
			<h:panelGroup>
				<p:calendar id="claAdqFechaCompra" value="#{adquisicionFrmCtrl.adquisicionSelected.fecha}"
					pattern="dd/MM/yyyy"
					locale="es" 
					requiredMessage="REQUERIDO" required="true" styleClass="Wid100">
				</p:calendar>
				<p:message for="claAdqFechaCompra" />
			</h:panelGroup>
			
			<h:panelGroup>
				<h:outputText value="NUM. COMPROBANTE *" styleClass="cpoRequerido"/>
			</h:panelGroup>
			<h:panelGroup>

				<p:inputMask id="inpAdqNumFac"
					value="#{adquisicionFrmCtrl.adquisicionSelected.numfactura}"
					mask="999-999-999999999" required="true"
					requiredMessage="REQUERIDO" styleClass="Wid100" maxlength="17"
					validatorMessage="FORMATO 999-999-999999999"
					placeholder="FORMATO : 999-999-999999999" >
					<f:converter converterId="formatoNumComprobanteConverter"/>
				</p:inputMask>

				<p:message for="inpAdqNumFac" />
			</h:panelGroup>
			
			<h:outputText value="NUM. #{msg['label.autorizacion']}"/>
			<h:panelGroup>
				<p:inputText id="inpAdqNumAut" value="#{adquisicionFrmCtrl.adquisicionSelected.autorizacion}" required="false" requiredMessage="REQUERIDO" styleClass="Wid100" maxlength="150" placeholder="Formato: 1123411234600" validatorMessage="SOLO NUMEROS">
					<f:validateRegex pattern="^\d+$"/>
				</p:inputText>
				<p:message for="inpAdqNumAut" />
			</h:panelGroup>
			
			<h:outputText value="ES GASTO *" styleClass="cpoRequerido"/>
			<h:panelGroup>
				<p:selectBooleanButton value="#{adquisicionFrmCtrl.adquisicionSelected.esGastoBol}" onLabel="SI" offLabel="No" style="width:80px">
				</p:selectBooleanButton>
			</h:panelGroup>
			
		</p:panelGrid>
		<div class="EmptyBox10"/>
		
	</div>
		
	
</ui:composition>
