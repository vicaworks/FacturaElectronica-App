<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
				xmlns:of="http://omnifaces.org/functions">
	
	<style type="text/css">
		
		.adquisicionDetDT .ui-datatable-scrollable-body{
				min-height: 45vh !important;
				/* height: calc(100vh - 430px); */
				
		}
		
	</style>
	
	<div class="card card-w-title">
	
		<!-- Opciones -->
		
		<p:panelGrid id="gridAdqFrmOP2" columns="3" styleClass="ui-panelgrid-blank Wid100" columnClasses="ui-g-12 ui-lg-3,ui-g-12 ui-lg-3,ui-g-12 ui-lg-3">
			<p:commandButton id="cmdAdqBuscarProducto"
				value="PRODUCTO" icon="fa fa-search" 
				action="#{listaProductoCtrl.cargarPantalla()}" styleClass="Wid100 Fs11" update="@form" process="@form @this :formMain:adquisicionDetDT">
				<f:setPropertyActionListener value="#{adquisicionFrmCtrl}" target="#{listaProductoCtrl.adquisicionFrmCtrl}"/>
				<f:setPropertyActionListener value="ADQUISICION" target="#{listaProductoCtrl.callModule}"/>
				<f:setPropertyActionListener value=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT" target="#{listaProductoCtrl.viewUpdate}"/>
				<f:setPropertyActionListener value="formMain" target="#{listaProductoCtrl.formModule}"/>
			</p:commandButton>
			
			<p:commandButton  id="cmdAdqAgregarDetalle" 
				icon="fa fa-plus"
				value="ITEM"
				styleClass="secondary-button Wid100 Fs11"
				action="#{adquisicionFrmCtrl.agregarDetalle()}"
				process="@this :formMain:adquisicionDetDT @form"
				update="@form">
			</p:commandButton>
			
			<p:commandButton  id="cmdAdqAgregarProducto" 
				icon="fa fa-plus"
				value="NUEVO PRODUCTO"
				styleClass="Wid100 secondary-button Fs11"
				action="#{productoCtrl.nuevo()}"
				update="@form" 
				process="@this :formMain:adquisicionDetDT @form">
				<f:setPropertyActionListener value="ADQUISICION" target="#{productoCtrl.callModule}"/>
				<f:setPropertyActionListener value="formMain" target="#{productoCtrl.formModule}"/>
				<f:setPropertyActionListener value=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT" target="#{productoCtrl.viewUpdate}"/>
				<f:setPropertyActionListener value="#{adquisicionFrmCtrl}" target="#{productoCtrl.adquisicionFrmCtrl}"/>
			</p:commandButton>
			
			
		</p:panelGrid>
		
		<!-- Detalle de la factura -->
		<div class="EmptyBox5"/>
		<p:dataTable id="adquisicionDetDT" var="d"
			value="#{adquisicionFrmCtrl.adquisiciondetalleList}" scrollable="true"
			emptyMessage="#{msg['mensaje.noexistenDatos']}"
			styleClass="adquisicionDetDT Fs11"  
			rowKey="#{d.idadquisiciondetalle}"
			selectionMode="single"
			selection="#{adquisicionFrmCtrl.adquisiciondetalleSelected}">
			
			<p:ajax event="rowSelect"  update=":formMain:adquisicionDetDT">
			</p:ajax>
			
			<!-- item con producto -->	
			<p:column headerText="ITEM" style="width:90%;">
				<div class="EmptyBox5"/>
				<div class="p-grid p-align-center vertical-container">
						
					<div class="p-col-9">
						<!-- DETALLE CON PRODUCTO -->
						<p:outputLabel rendered="#{d.producto!=null}">
						
							 <div class="p-grid">
							 	
								 	<div class="p-col-12">
										<h:outputText value="#{d.descripcion}" styleClass="Fs12 FontBold"/>
									</div>
									
									<div class="p-md-3 dt-spinner">
									<h:outputText  id="intDetFacCantidad1" value="CANT." styleClass="Fs12 FontBold" style="margin-right:10px;">
									</h:outputText>
									<br/>
									<p:spinner id="insDetFacCanbtidad1" value="#{d.cantidad}" min="0" decimalPlaces="2" onkeydown="if(event.keyCode==13){event.keyCode=9;return false;}" styleClass="Wid100" stepFactor="1">
										<p:ajax listener="#{adquisicionFrmCtrl.calcularAdquicisioDetalleProductoAction(d,true)}"  update=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT"/>
									</p:spinner>
								</div>
								<div class="p-md-3 dt-spinner">
								
									<h:outputText value="P.UNITARIO" styleClass="Fs12 FontBold" style="margin-right:10px;"/>
									<br/>
									<p:spinner value="#{d.preciounitario}" min="0" decimalPlaces="2" prefix="$" onkeydown="if(event.keyCode==13){event.keyCode=9;return false;}" styleClass="Wid100" >
										<p:ajax listener="#{adquisicionFrmCtrl.calcularAdquicisioDetalleProductoAction(d,true)}"  update=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT"/>
									</p:spinner>
									
								</div>
								<div class="p-md-2 dt-spinner">
								
									<h:outputText value="DESCUTO($)" styleClass="Fs12 FontBold" style="margin-right:10px;"/>
									<br/>
									<p:spinner value="#{d.descuento}" min="0" decimalPlaces="2" onkeydown="if(event.keyCode==13){event.keyCode=9;return false;}" styleClass="Fs8"  >
										<p:ajax listener="#{adquisicionFrmCtrl.calcularAdquicisioDetalleProductoAction(d,false)}"  update=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT"/>
									</p:spinner>
									
								</div>
								<div class="p-md-2 dt-selection">
									<h:outputText value="ICE" styleClass="Fs12 FontBold" style="margin-right:10px;"/>
									<br/>
									<p:selectOneMenu id="somdetIceItem1"
										value="#{d.ice}"
										converter="omnifaces.SelectItemsConverter"
										required="true"
										requiredMessage="REQUERIDO"
										styleClass="Wid100 Fs8">
				
										<f:selectItems value="#{adquisicionFrmCtrl.iceList}" var="ice"
											itemLabel="#{ice.tarifaadvalorem}" itemValue="#{ice}" />
											
										<p:ajax listener="#{adquisicionFrmCtrl.calcularAdquicisioDetalleProductoAction(d,true)}"  update=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT"/>
										
									</p:selectOneMenu>
								</div>
								
								<div class="p-md-2 dt-selection">
									<h:outputText value="IVA" styleClass="Fs12 FontBold" style="margin-right:10px;"/>
									<br/>
									<p:selectOneMenu id="somdetIvaItem1"
										value="#{d.iva}"
										converter="omnifaces.SelectItemsConverter"
										required="true"
										requiredMessage="REQUERIDO"
										styleClass="Wid100 Fs8">
				
										<f:selectItems value="#{adquisicionFrmCtrl.ivaList}" var="iva2"
												itemLabel="#{iva2.porcentaje}" itemValue="#{iva2}" />
												
										<p:ajax listener="#{adquisicionFrmCtrl.calcularAdquicisioDetalleProductoAction(d,true)}" update=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT"/>
										
									</p:selectOneMenu>
								</div>
							 	
							 </div>
						 
						</p:outputLabel>
						
						<p:outputLabel rendered="#{d.producto==null}">
							
							<!-- DETALLE SIN PRODUCTO -->
							<div class="p-grid">
								<div class="p-col-12">
									<p:inputText id="intDetNombreProducto" value="#{d.descripcion}" required="true" requiredMessage="REQUERIDO" styleClass="Wid100" maxlength="400">
										<p:ajax event="change"></p:ajax>
									</p:inputText>
									<p:message for="intDetNombreProducto"/>
								</div>
								<div class="p-md-3 dt-spinner">
									<h:outputText id="intDetFacCantidad2" value="CANT." styleClass="Fs10 FontBold" style="margin-right:10px;"/>
									<br/>
									<p:spinner id="insDetFacCanbtidad2" value="#{d.cantidad}" min="0" decimalPlaces="2" onkeydown="if(event.keyCode==13){event.keyCode=9;return false;}" styleClass="Wid100" >
										<p:ajax listener="#{adquisicionFrmCtrl.calcularAdquicisioDetalleProductoAction(d,false)}"  update=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT"/>
									</p:spinner>
								</div>
								<div class="p-md-3 dt-spinner">
								
									<h:outputText value="P.UNITARIO" styleClass="Fs10 FontBold" style="margin-right:10px;"/>
									<br/>
									<p:spinner value="#{d.preciounitario}" min="0" decimalPlaces="2" prefix="$" onkeydown="if(event.keyCode==13){event.keyCode=9;return false;}" styleClass="Wid100" >
										<p:ajax listener="#{adquisicionFrmCtrl.calcularAdquicisioDetalleProductoAction(d,false)}"  update=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT"/>
									</p:spinner>
									
								</div>
								<div class="p-md-2 dt-spinner">
								
									<h:outputText value="DESCUTO($)" styleClass="Fs10 FontBold" style="margin-right:10px;"/>
									<br/>
									<p:spinner value="#{d.descuento}" min="0" decimalPlaces="2" prefix="$" onkeydown="if(event.keyCode==13){event.keyCode=9;return false;}" >
										<p:ajax listener="#{adquisicionFrmCtrl.calcularAdquicisioDetalleProductoAction(d,false)}"  update=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT"/>
									</p:spinner>
									
								</div>
								
								<div class="p-md-2 dt-selection">
									<h:outputText value="ICE" styleClass="Fs12 FontBold" style="margin-right:10px;"/>
									<br/>
									<p:selectOneMenu id="somdetIceItem2"
										value="#{d.ice}"
										converter="omnifaces.SelectItemsConverter"
										required="true"
										requiredMessage="REQUERIDO"
										styleClass="Wid100 Fs8">
				
										<f:selectItems value="#{adquisicionFrmCtrl.iceList}" var="ice"
											itemLabel="#{ice.tarifaadvalorem}" itemValue="#{ice}" />
											
										<p:ajax listener="#{adquisicionFrmCtrl.calcularAdquicisioDetalleProductoAction(d,false)}"  update=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT"/>
										
									</p:selectOneMenu>
								</div>
								
								<div class="p-md-2 dt-selection">
									<h:outputText value="IVA" styleClass="Fs12 FontBold" style="margin-right:10px;"/>
									<br/>
									<p:selectOneMenu id="somdetIvaItem2"
										value="#{d.iva}"
										converter="omnifaces.SelectItemsConverter"
										required="true"
										requiredMessage="REQUERIDO"
										styleClass="Wid100 Fs8">
				
										<f:selectItems value="#{adquisicionFrmCtrl.ivaList}" var="iva2"
												itemLabel="#{iva2.porcentaje}" itemValue="#{iva2}" />
												
										<p:ajax listener="#{adquisicionFrmCtrl.calcularAdquicisioDetalleProductoAction(d,false)}"  update=":formMain:adquisicionDetDT :formMain:oupTotales :formMain:oupPagoDT"/>
										
									</p:selectOneMenu>
								</div>
							</div>
						
						</p:outputLabel>
						
					</div>
					
					<div class="p-col-3" style="text-align: right;">
						<h:outputText value="#{d.preciototal}" styleClass="Fs12 FontBold">
							<f:convertNumber  pattern="#{appSessionCtrl.formatoMoneda}"/>
						</h:outputText>
					</div>
					
				</div>
				
			</p:column>
			
			
			<p:column style="width:10%;" styleClass="TexAlCenter">
				<div class="p-grid p-justify-center p-align-center ">
					<p:commandLink id="clkAdqDelete" action="#{adquisicionFrmCtrl.eliminarDetalle()}" title="ELIMINAR" update="@form" process="@this :formMain:adquisicionDetDT" disabled="#{adquisicionFrmCtrl.adquisicionSelected.estado!=ComprobanteEstadoEnum.REGISTRADO}">
						<i class="fa fa-trash-o Fs16" style="color:red;"></i>
						<p:confirm header="#{msg['label.confirmacion']}" message="#{msg['mensaje.confimacion']}" icon="fa fw-3x fa-exclamation-triangle" />
						<f:setPropertyActionListener value="#{d}" target="#{adquisicionFrmCtrl.adquisiciondetalleSelected}"/>
					</p:commandLink>
				</div>
			</p:column>
			
		</p:dataTable>
		
		<div class="EmptyBox20"></div>
		
		<!-- Totales -->
		<p:outputPanel id="oupTotales">
			<div class="p-grid p-align-top p-justify-end">
			
				<div class="p-grid p-col-12 p-md-7 divResumen">
					
					<div class="p-col-7 subtotal">
						<h:outputText value="Subtotal" styleClass="Fs12" />
					</div>
					
					<div class="p-col-5 subtotalValor">
						<h:outputText value="#{adquisicionFrmCtrl.adquisicionSelected.subtotal}" styleClass="Fs12">
							<f:convertNumber  pattern="#{appSessionCtrl.formatoMoneda}"/>
						</h:outputText>
					</div>
					
					<div class="p-col-7 subtotal">
						<h:outputText value="Descuento" styleClass="Fs12" />
					</div>
					
					<div class="p-col-5 subtotalValor">
						<h:outputText value="#{adquisicionFrmCtrl.adquisicionSelected.totaldescuento}" styleClass="Fs12">
							<f:convertNumber  pattern="#{appSessionCtrl.formatoMoneda}"/>
						</h:outputText>
					</div>
					
					<div class="p-col-7 subtotal">
						<h:outputText value="Total I.C.E." styleClass="Fs12" />
					</div>
					
					<div class="p-col-5 subtotalValor">
						<h:outputText value="#{adquisicionFrmCtrl.adquisicionSelected.totalice}" styleClass="Fs12">
							<f:convertNumber  pattern="#{appSessionCtrl.formatoMoneda}"/>
						</h:outputText>
					</div>
					
					<div class="p-col-7 subtotal">
						<h:outputText value="Total I.V.A." styleClass="Fs12" />
					</div>
					
					<div class="p-col-5 subtotalValor">
						<h:outputText value="#{adquisicionFrmCtrl.adquisicionSelected.totaliva}" styleClass="Fs12">
							<f:convertNumber  pattern="#{appSessionCtrl.formatoMoneda}"/>
						</h:outputText>
					</div>
					
					<div class="p-col-7">
					</div>
					<div class="p-grid p-col-5">
						<div class="p-col-12 bordeSubtotal"></div>
					</div>
					
					<div class="p-col-7 subtotal">
						<h:outputText value="Total" styleClass="FontBold Fs16" />
					</div>
					
					<div class="p-col-5 subtotalValor">
						<h:outputText value="#{adquisicionFrmCtrl.adquisicionSelected.totalfactura}" styleClass="FontBold Fs16 DispBlock Wid100">
							<f:convertNumber  pattern="#{appSessionCtrl.formatoMoneda}"/>
						</h:outputText>
					</div>
							
				</div>
			</div>
		</p:outputPanel>
		
	</div>
	<div class="EmptyBox5"/>
	<!--
		Funciones de calculo de la retencion renta e iva 
	 -->
	 <p:remoteCommand name="calcularretencionRenta" update=":formMain:msgFormMain :formMain:oupPagoDT" action="#{adquisicionFrmCtrl.calcularRettencionAction('RENTA')}"/>
	 <p:remoteCommand name="calcularretencionIva" update=":formMain:msgFormMain :formMain:oupPagoDT" action="#{adquisicionFrmCtrl.calcularRettencionAction('IVA')}"/>
	 <!--
	 	=====================================================================================================  
	 -->
	<p:outputPanel id="oupPagoDT">
		<div class="card card-w-title">	
	
			<h2 class="cardTitle"><i class="fa fa-check-circle"></i>  Valor a Pagar</h2>
			<div class="EmptyBox10"/>
			
			<div class="p-grid p-align-center vertical-container">
				<div class="p-col-12 p-md-4">
					<p:commandLink id="cmlCalValorRenta" title="Calcular">
						<i class="fa fa-calculator" style="color:#2f2f2f;"/>
					</p:commandLink>
					<p:overlayPanel for="cmlCalValorRenta" hideEffect="fade">
						<p:inputNumber symbol="%"  value="#{adquisicionFrmCtrl.porcentajeRenta}" 
                                symbolPosition="s" emptyValue="always" onkeydown="if(event.keyCode==13){calcularretencionRenta();return false;}">  
		                </p:inputNumber>
		                <p:spacer width="10px"/>
						<p:commandLink action="#{adquisicionFrmCtrl.calcularRettencionAction('RENTA')}" update=":formMain:msgFormMain :formMain:oupPagoDT">
							<i class="fa fa-floppy-o Fs16"></i>
						</p:commandLink>  
				    </p:overlayPanel>
					<p:spacer width="3"/>
					<h:outputText value="Val retenido Renta" styleClass="cpoRequerido"/>
					<div class="EmptyBox5"/>
					<p:spinner value="#{adquisicionFrmCtrl.adquisicionSelected.valorretenidorenta}" decimalPlaces="2"  styleClass="Wid100">
						<p:ajax listener="#{adquisicionFrmCtrl.totalizarRetencion()}" update=":formMain:msgFormMain :formMain:oupPagoDT" process="@this :formMain:oupPagoDT"/>
					</p:spinner>
				</div>
				
				<div class="p-col-12 p-md-4">
					<p:commandLink id="cmlCalValorIva" title="Calcular">
						<i class="fa fa-calculator" style="color:#2f2f2f;"/>
					</p:commandLink>
					<p:spacer width="3"/>
					<p:overlayPanel for="cmlCalValorIva" hideEffect="fade">
						<p:inputNumber symbol="%" value="#{adquisicionFrmCtrl.porcentajeIva}"
                                symbolPosition="s" emptyValue="always" onkeydown="if(event.keyCode==13){calcularretencionIva();return false;}">  
		                </p:inputNumber>
		                <p:spacer width="10px"/>
						<p:commandLink action="#{adquisicionFrmCtrl.calcularRettencionAction('IVA')}" update=":formMain:msgFormMain :formMain:oupPagoDT" process="@this :formMain:oupPagoDT">
							<i class="fa fa-floppy-o Fs16"></i>
						</p:commandLink>  
				    </p:overlayPanel>
					<p:spacer width="3"/>
					<h:outputText value="Val retenido I.V.A." styleClass="cpoRequerido"/>
					<div class="EmptyBox5"/>
					<p:spinner value="#{adquisicionFrmCtrl.adquisicionSelected.valorretenidoiva}" decimalPlaces="2"  styleClass="Wid100">
						<p:ajax listener="#{adquisicionFrmCtrl.totalizarRetencion()}" update=":formMain:msgFormMain :formMain:oupPagoDT" process="@this :formMain:oupPagoDT"/>
					</p:spinner>
				</div>
				
				<div class="p-col-12 p-md-4" style="text-align: center;">
					<h:outputText value="Total retenido" styleClass="FontBold"/>
					<div class="EmptyBox5"/>
					<div class="Wid100" >
						<h:outputText  styleClass="Fs18 DispBlock" value="#{adquisicionFrmCtrl.adquisicionSelected.totalretencion}">
							<f:convertNumber pattern="#{appSessionCtrl.formatoMoneda}"/>
						</h:outputText>
					</div>
				</div>
			</div>
			
			<div class="EmptyBox20"/>
			
			<div class="p-grid p-justify-even">
				<div class="p-col-12 p-md-3 boxMain box-gray">
					<div class="DispBlock box-header">TOTAL POR PAGAR</div>
					<h:outputText value="#{adquisicionFrmCtrl.adquisicionSelected.totalpagar}" styleClass="box-content">
						<f:convertNumber pattern="#{appSessionCtrl.formatoMoneda}"/>
					</h:outputText>
				</div>
				
				<div class="p-col-12 p-md-3 boxMain box-border-gray">
					<div class="DispBlock box-header">TOTAL PAGADO</div>
					<h:outputText value="#{adquisicionFrmCtrl.totalPago}" styleClass="box-content">
						<f:convertNumber pattern="#{appSessionCtrl.formatoMoneda}"/>
					</h:outputText>
				</div>
				
				<div class="p-col-12 p-md-3 boxMain box-border-gray">
					<div class="DispBlock box-header">PENDIENTE DE PAGO</div>
					<h:outputText value="#{adquisicionFrmCtrl.totalSaldo}" styleClass="box-content">
						<f:convertNumber pattern="#{appSessionCtrl.formatoMoneda}"/>
					</h:outputText>
				</div>
			</div>	
			
			<div class="EmptyBox10"/>
		</div>
		
		<div class="EmptyBox5"/>
		<div class="card card-w-title">	
		
				<h2 class="cardTitle"><i class="fa fa-check-circle"></i>  Pago</h2>
				<p:panelGrid id="gridOpcPagos" columns="2"
					 styleClass="ui-panelgrid-blank Wid100" 
					 columnClasses="ui-g-12 ui-md-10,
					 				ui-g-12 ui-md-2">
					 				
					 <p:selectOneMenu id="somFrmListaProducto"
												value="#{adquisicionFrmCtrl.tipopagoSelected}"
												converter="omnifaces.SelectItemsConverter"
												required="false"
												requiredMessage="REQUERIDO"
												styleClass="Wid100"
												filter="true" filterMatchMode="contains">
	
						<f:selectItems value="#{adquisicionFrmCtrl.tipopagoList}" var="tp"
							itemLabel="#{tp.nombre}" itemValue="#{tp}" />
							
						<p:ajax event="valueChange" listener="#{adquisicionFrmCtrl.aplicarPago()}" process="@this :formMain:oupPagoDT" update=":formMain:msgFormMain :formMain:gridOpcPagos :formMain:oupPagoDT"/>	
							
					</p:selectOneMenu>
					 					 
					 <p:commandButton value="PAGO" icon="fa fa-plus" action="#{adquisicionFrmCtrl.aplicarPago()}" process="@this :formMain:oupPagoDT" styleClass="secondary-button Wid100 Fs11" update=":formMain:msgFormMain :formMain:gridOpcPagos :formMain:oupPagoDT">
					 </p:commandButton>
					
				</p:panelGrid>
			
			<!-- detalle pago -->
			<div class="EmptyBox5"/>
			
			<p:dataTable id="pvPagoDetalleDT"
	        			scrollable="true"
	        			value="#{adquisicionFrmCtrl.pagoList}"
	        			var="p"
	        			emptyMessage="#{msg['mensaje.noexistenDatos']}"
						styleClass="pvPagoDetalleDT Fs12"  
						rowKey="#{p.idpago}"
						selectionMode="single"
						selection="#{adquisicionFrmCtrl.pagoSelected}">
				
				<p:ajax event="rowSelect"  update=":formMain:pvPagoDetalleDT">
				</p:ajax>
				
				<p:column headerText="ITEM" style="width:90%;">
					
					<div class="EmptyBox5"/>
					<div class="p-grid p-align-center vertical-container ui-inputfield-pago">
						
						<div class="p-col-12">
							<h:outputText value="#{p.tipopago.nombre}" styleClass="FontBold DispBlock Wid100 Hei100 Fs14 markGray"/>
						</div>
						
						<div class="p-col-12">
						
							<div class="p-grid Fs10">
								
								<div class="p-col-12 p-md-4 dt-spinner">
								
									<h:outputText value="VALOR" styleClass="Fs12"/>
									
									<p:spinner id="ipsPagValor" value="#{p.total}" min="0" decimalPlaces="2" prefix="$" onkeydown="if(event.keyCode==13){return false;}" styleClass="Wid100" >
										<p:ajax listener="#{adquisicionFrmCtrl.totalizarPagoaction(p)}" update=":formMain:msgFormMain :formMain:oupPagoDT" process="@this :formMain:oupPagoDT"/>
									</p:spinner>
									
								</div>
								
								
								<div class="p-col-12 p-md-4 dt-spinner">
									<!-- Efectivo -->								
									<h:outputText value="IMPORTE" styleClass="Fs12" rendered="#{p.tipopago.subdetalle == '1'}"/>
									<p:spinner id="ipsPagValorEntrega" value="#{p.valorentrega}" min="0" decimalPlaces="2" prefix="$" onkeydown="if(event.keyCode==13){return false;}" styleClass="Wid100" rendered="#{p.tipopago.subdetalle == '1'}" >
										<p:ajax listener="#{adquisicionFrmCtrl.calcularCambioAction(p)}" update=":formMain:msgFormMain :formMain:oupPagoDT" process="@this :formMain:oupPagoDT"/>
									</p:spinner>
									
									<!-- cheque, t credito, t debito, transferencia, deposito, credito -->
									<h:outputText value="# DOCUMENTO" styleClass="Fs12" rendered="#{p.tipopago.subdetalle == '2' or p.tipopago.subdetalle == '3'}"/>
									<p:inputText id="inpPagoNumDoc" value="#{p.numerodocumento}" required="false" styleClass="Wid100" maxlength="150" rendered="#{p.tipopago.subdetalle == '2' or p.tipopago.subdetalle == '3'}">
										<p:ajax event="change" update=":formMain:pvPagoDetalleDT">
											<f:setPropertyActionListener value="#{p}" target="#{adquisicionFrmCtrl.pagoSelected}"/>
										</p:ajax>
									</p:inputText>
									
									<!-- credito -->
									<h:outputText value="PLAZO" styleClass="Fs12" rendered="#{p.tipopago.subdetalle == '4'}"/>
									<p:spinner id="ipsPagPlazo" value="#{p.plazo}" min="0" decimalPlaces="0" onkeydown="if(event.keyCode==13){return false;}" styleClass="Wid100" rendered="#{p.tipopago.subdetalle == '4'}" >
										<p:ajax update=":formMain:pvPagoDetalleDT">
											<f:setPropertyActionListener value="#{p}" target="#{adquisicionFrmCtrl.pagoSelected}"/>
										</p:ajax>
									</p:spinner>
									
								</div>
								
								<div class="p-col-12 p-md-4 dt-spinner">
									<!-- Efectivo -->
									<h:outputText value="CAMBIO" styleClass="Fs12" rendered="#{p.tipopago.subdetalle == '1'}"/>
									<p:spinner id="ipsPagValorCambio" value="#{p.cambio}" min="0" decimalPlaces="2" prefix="$" onkeydown="if(event.keyCode==13){return false;}" styleClass="Wid100" rendered="#{p.tipopago.subdetalle == '1'}" readonly="true" >
										<p:ajax update=":formMain:pvPagoDetalleDT">
											<f:setPropertyActionListener value="#{p}" target="#{adquisicionFrmCtrl.pagoSelected}"/>
										</p:ajax>
									</p:spinner>
									
									<!-- cheque, t credito, t debito, transferencia, deposito, credito -->
									<h:outputText value="BANCO" styleClass="Fs12" rendered="#{p.tipopago.subdetalle == '2' or p.tipopago.subdetalle == '3'}"/>
									<p:inputText id="inpPagoBanco" value="#{p.nombrebanco}" required="false" styleClass="Wid100" maxlength="100" rendered="#{p.tipopago.subdetalle == '2' or p.tipopago.subdetalle == '3'}">
										<p:ajax event="change" update=":formMain:pvPagoDetalleDT">
											<f:setPropertyActionListener value="#{p}" target="#{adquisicionFrmCtrl.pagoSelected}"/>
										</p:ajax>
									</p:inputText>
									
									<!-- credito -->
									<h:outputText value="FECHA PAGO" styleClass="Fs12" rendered="#{p.tipopago.subdetalle == '4'}"/>
									<p:calendar id="claAdqFechaCompra" value="#{p.fechapago}"
										pattern="dd/MM/yyyy"
										locale="es"
										requiredMessage="REQUERIDO" required="true" styleClass="Wid100" placeholder="Fecha tentativa de pago"
										rendered="#{p.tipopago.subdetalle == '4'}">
									</p:calendar>
									
								</div>
								
							</div>
						</div>
					</div>
				</p:column>
				
				<p:column style="width:10%;" styleClass="TexAlCenter">
					
					<div class="p-grid p-justify-center p-align-center">
						<div class="p-col-12">
							<p:commandLink  action="#{adquisicionFrmCtrl.eliminarDetallePago()}" process="@this :formMain:pvPagoDetalleDT" update=":formMain:msgFormMain :formMain:oupPagoDT">
								<f:setPropertyActionListener value="#{p}" target="#{adquisicionFrmCtrl.pagoSelected}"/>
								<i class="fa fa-trash-o Fs20" style="color:red;"></i>
								<p:confirm header="#{msg['label.confirmacion']}" message="#{msg['mensaje.confimacion']}" icon="fa fw-3x fa-exclamation-triangle" />
							</p:commandLink>		
						</div>
					</div>
				
				</p:column>
							
			</p:dataTable>
		
			<div class="EmptyBox20"/>
		
		</div>
		
	</p:outputPanel>
	
</ui:composition>
