<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
				xmlns:of="http://omnifaces.org/functions">
	
	<style type="text/css">
		
		.guiaRemDetalleDT .ui-datascroller-content{
				min-height: 40vh !important;
				height: calc(100vh - 240px);
		}
		
	</style>
	
	
	<div class="card">
		<p:outputPanel id="oupGuiaRemDetalleDT" styleClass="w-full">
		
			<p:dataScroller id="guiaRemDetalleDT" value="#{guiaRemFormCtrl.destinatarioSelected.detalledestinatarioList}" var="det" chunkSize="10" mode="inline" styleClass="guiaRemDetalleDT">
				<f:facet name="header">
	            	<div class="flex justify-content-between align-items-start gap-2">
	            		<div class="flex-1 flex flex-column align-items-start gap-1">
							<span class="text-gray-900 fs-14 font-bold my-1">Destinatario Productos</span>
							<p:skeleton height="30px" rendered="#{guiaRemFormCtrl.destinatarioSelected==null}"/>
							<f:subview rendered="#{guiaRemFormCtrl.destinatarioSelected!=null}">
								<span class="fs-14 text-primary-600 font-bold">#{guiaRemFormCtrl.destinatarioSelected.razonsocialdestinatario}</span>
								<span class="text-gray-900 font-light fs-12">#{guiaRemFormCtrl.destinatarioSelected.identificaciondestinatario}</span>
							</f:subview>
	            		</div>
						<p:commandButton id="cmdGrNuevoDetalle" 
							action="#{listaProductoCtrl.cargarPantalla()}" 
							styleClass="flex-0 ui-button-primary min-width-80 fs-12"
							icon="fa fa-plus fs-12"
							value="Agregar"
							process="@this @form:oupGuiaRemDetalleDT"
							disabled="#{guiaRemFormCtrl.destinatarioSelected==null}">
							<f:setPropertyActionListener value="#{guiaRemFormCtrl.establecimientoMain}" target="#{listaProductoCtrl.establecimientoMain}"/>
							<f:setPropertyActionListener value="GUIA_REMISION" target="#{listaProductoCtrl.callModule}"/>
							<f:setPropertyActionListener value=":formMain:oupGuiaRemDetalleDT :formMain:oupTotDestinatario" target="#{listaProductoCtrl.viewUpdate}"/>
							<f:setPropertyActionListener value="formMain" target="#{listaProductoCtrl.formModule}"/>
						</p:commandButton>			
	            		
	            	</div>
	            </f:facet>
	            
	            <div class="grid border-bottom-1 border-blue-100 mb-1 pb-1">
	            	<div class="col-9 md:col-10">
	            		
	            		<div class="flex flex-column">
	            			<span style="color: black;" class="block fs-12 font-medium">#{det.descripcion}</span>
		            		<div>
		            			<i class="fa fa-barcode Fs9 mr-1"></i><span class="fs-10">#{det.codigointerno} </span>
		            		</div>
	            		</div>
	            		
	            		<div class="flex gap-2 mt-2" >
            				<p:commandLink action="#{guiaRemFormCtrl.editarDetalle()}" 
            					title="Editar" 
            					process="@this"
            					styleClass="p-3 det-item-hover" 
           						style="border-radius:100%; border: 1px solid #b3d7ff;width:4.1rem;height:4.1rem;">
								<i class="fa fa-edit fs-18 text-gray-900"></i>
								<f:setPropertyActionListener value="#{det}" target="#{guiaRemFormCtrl.detalledestinatarioSeleted}"/>
							</p:commandLink>
            				<p:commandLink action="#{guiaRemFormCtrl.eliminarDetalleDestinatario()}" 
            					title="Eliminar" 
            					update="@form:oupGuiaRemDetalleDT @form:oupTotDestinatario" 
            					process="@this" 
            					disabled="#{guiaRemFormCtrl.enableAccion}"
            					styleClass="p-3 det-item-hover" 
           						style="border-radius:100%; border: 1px solid #b3d7ff;width:4.1rem;height:4.1rem;">	            					
								<i class="fa-regular fa-trash-can fs-18 text-gray-900"></i>
								<p:confirm header="#{msg['label.confirmacion']}" message="#{msg['mensaje.confimacion']}" icon="fa fw-3x fa-exclamation-triangle" />
								<f:setPropertyActionListener value="#{det}" target="#{guiaRemFormCtrl.detalledestinatarioSeleted}"/>
							</p:commandLink>
	            		</div>	            		
	            	</div>
	            	<div class="col-3 md:col-2">
	            		<div class="h-full flex align-items-center justify-content-center w-full">
	            			<h:outputText value="#{det.cantidad}" styleClass="fs-18 text-gray-900 font-medium mb-1 text-right">
	     						<f:convertNumber pattern="#{appSessionCtrl.formatoNumberDecimalOpcional}"/>
	    					</h:outputText>
	            		</div>
	            	</div>
            	</div>
	            
	       	</p:dataScroller>
		
			<div class="EmptyBox5"/>
			<div class="flex justify-content-end align-items-end">
				<div>
					<span class="fs-12 text-gray-800 mr-2n align-self-end">Productos</span>
					<span class="fs-20 text-primary-600 font-semibold">
						<h:outputText value="#{guiaRemFormCtrl.destinatarioSelected.total}" styleClass="font-bold" rendered="#{guiaRemFormCtrl.destinatarioSelected!=null}" >
							<f:convertNumber pattern="#,##0.##"/>
						</h:outputText>
						
						<h:outputText value="#{0}" styleClass="font-bold" rendered="#{guiaRemFormCtrl.destinatarioSelected==null}" >
							<f:convertNumber pattern="#,##0.##"/>
						</h:outputText>
					</span>
				</div>
			</div>
		</p:outputPanel>
	</div>	
	<div class="EmptyBox30"/>
	
</ui:composition>
